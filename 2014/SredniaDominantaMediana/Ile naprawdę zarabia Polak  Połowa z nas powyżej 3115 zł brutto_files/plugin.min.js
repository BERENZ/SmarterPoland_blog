/*!
 * NWMatcher 1.2.5 - Fast CSS3 Selector Engine
 * Copyright (C) 2007-2012 Diego Perini
 * See http://nwbox.com/license
 * http://s3.amazonaws.com/nwapi/nwmatcher/nwmatcher-1.2.5-min.js
 */
(function(ae){var a="nwmatcher-1.2.5",at=typeof exports=="object"?exports:((ae.NW||(ae.NW={}))&&(ae.NW.Dom||(ae.NW.Dom={}))),au=ae.document,ar=au.documentElement,b0=[].slice,cB={}.toString,aL,aQ,b5,aO,al,aJ,aI,aH,aG,a9="[#.:]?",aF="([~*^$|!]?={1})",w="[\\x20\\t\\n\\r\\f]*",aE="[\\x20]|[>+~][^>+~]",aD="[-+]?\\d*n?[-+]?\\d*",aM="\"[^\"]*\"|'[^']*'",cA="\\([^()]+\\)|\\(.*\\)",cz="\\{[^{}]+\\}|\\{.*\\}",cy="\\[[^[\\]]*\\]|\\[.*\\]",aK="\\[.*\\]|\\(.*\\)|\\{.*\\}",aj="(?:[-\\w]|[^\\x00-\\xa0]|\\\\.)",cp="(?:-?[_a-zA-Z]{1}[-\\w]*|[^\\x00-\\xa0]+|\\\\.+)+",aC="("+aM+"|"+cp+")",cn=w+"("+aj+"+:?"+aj+"+)"+w+"(?:"+aF+w+aC+")?"+w,cx=cn.replace(aC,"([\\x22\\x27]*)((?:\\\\?.)*?)\\3"),a8="((?:"+aD+"|"+aM+"|"+a9+"|"+aj+"+|\\["+cn+"\\]|\\(.+\\)|"+w+"|,)+)",cw=".+",a5="(?=[\\x20\\t\\n\\r\\f]*[^>+~(){}<>])(\\*|(?:"+a9+cp+")|"+aE+"|\\["+cn+"\\]|\\("+a8+"\\)|\\{"+cw+"\\}|,)+",cv=a5.replace(a8,".*"),a7=new RegExp(a5,"g"),a6=new RegExp("^"+w+"|"+w+"$","g"),cu=new RegExp("^((?!:not)("+a9+"|"+cp+"|\\([^()]*\\))+|\\["+cn+"\\])$"),a3=new RegExp("([^,\\\\\\[\\]]+|"+cy+"|"+cA+"|"+cz+"|\\\\.)+","g"),ct=new RegExp("(\\["+cn+"\\]|\\("+a8+"\\)|[^\\x20>+~]|\\\\.)+","g"),aB=/[\x20\t\n\r\f]+/g,aA=new RegExp(cp+"|^$"),j=(function(){var i=(au.appendChild+"").replace(/appendChild/g,"");return function(m,l){var n=m&&m[l]||false;return n&&typeof n!="string"&&i==(n+"").replace(new RegExp(l,"g"),"")}})(),cs=j(au,"hasFocus"),a4=j(au,"querySelector"),cq=j(au,"getElementById"),co=j(ar,"getElementsByTagName"),a2=j(ar,"getElementsByClassName"),cm=j(ar,"getAttribute"),ck=j(ar,"hasAttribute"),az=(function(){var l=false,i=ar.id;ar.id="length";try{l=!!b0.call(au.childNodes,0)[0]}catch(m){}ar.id=i;return l})(),ay="nextElementSibling" in ar&&"previousElementSibling" in ar,b8=cq?(function(){var l=true,i="x"+String(+new Date),m=au.createElementNS?"a":'<a name="'+i+'">';(m=au.createElement(m)).name=i;ar.insertBefore(m,ar.firstChild);l=!!au.getElementById(i);ar.removeChild(m);return l})():true,ax=co?(function(){var i=au.createElement("div");i.appendChild(au.createComment(""));return !!i.getElementsByTagName("*")[0]})():true,aw=a2?(function(){var l,i=au.createElement("div"),m="\u53f0\u5317";i.appendChild(au.createElement("span")).setAttribute("class",m+"abc "+m);i.appendChild(au.createElement("span")).setAttribute("class","x");l=!i.getElementsByClassName(m)[0];i.lastChild.className=m;return l||i.getElementsByClassName(m).length!=2})():true,b6=cm?(function(){var i=au.createElement("input");i.setAttribute("value",5);return i.defaultValue!=5})():true,av=ck?(function(){var i=au.createElement("option");i.setAttribute("selected","selected");return !i.hasAttribute("selected")})():true,b4=(function(){var i=au.createElement("select");i.appendChild(au.createElement("option"));return !i.firstChild.selected})(),cK,cJ,s,ap,cI=/opera/i.test(cB.call(ae.opera)),aq=cI&&parseFloat(opera.version())>=11,ao=a4?(function(){var l=[],m=au.createElement("div"),n,i=function(p,o,u,r){var q=false;o.appendChild(u);try{q=o.querySelectorAll(p).length==r}catch(t){}while(o.firstChild){o.removeChild(o.firstChild)}return q};n=au.createElement("p");n.setAttribute("class","");i('[class^=""]',m,n,1)&&l.push("[*^$]=[\\x20\\t\\n\\r\\f]*(?:\"\"|'')");n=au.createElement("option");n.setAttribute("selected","selected");i(":checked",m,n,0)&&l.push(":checked");n=au.createElement("input");n.setAttribute("type","hidden");i(":enabled",m,n,1)&&l.push(":enabled",":disabled");n=au.createElement("link");n.setAttribute("href","x");i(":link",m,n,1)||l.push(":link");if(av){l.push("\\[[\\x20\\t\\n\\r\\f]*(?:checked|disabled|ismap|multiple|readonly|selected|value)")}return l.length?new RegExp(l.join("|")):{test:function(){return false}}})():true,am=new RegExp("(?:\\[[\\x20\\t\\n\\r\\f]*class\\b|\\."+cp+")"),ak=new RegExp(!(ax&&aw)?!cI?"^(?:\\*|[.#]?-?[_a-zA-Z]{1}"+aj+"*)$":"^(?:\\*|#-?[_a-zA-Z]{1}"+aj+"*)$":"^#?-?[_a-zA-Z]{1}"+aj+"*$"),ai={a:1,A:1,area:1,AREA:1,link:1,LINK:1},ag={checked:1,disabled:1,ismap:1,multiple:1,readonly:1,selected:1},a0={value:"defaultValue",checked:"defaultChecked",selected:"defaultSelected"},af={action:2,cite:2,codebase:2,data:2,href:2,longdesc:2,lowsrc:2,src:2,usemap:2},cH={"class":0,accept:1,"accept-charset":1,align:1,alink:1,axis:1,bgcolor:1,charset:1,checked:1,clear:1,codetype:1,color:1,compact:1,declare:1,defer:1,dir:1,direction:1,disabled:1,enctype:1,face:1,frame:1,hreflang:1,"http-equiv":1,lang:1,language:1,link:1,media:1,method:1,multiple:1,nohref:1,noresize:1,noshade:1,nowrap:1,readonly:1,rel:1,rev:1,rules:1,scope:1,scrolling:1,selected:1,shape:1,target:1,text:1,type:1,valign:1,valuetype:1,vlink:1},ad={accept:1,"accept-charset":1,alink:1,axis:1,bgcolor:1,charset:1,codetype:1,color:1,enctype:1,face:1,hreflang:1,"http-equiv":1,lang:1,language:1,link:1,media:1,rel:1,rev:1,target:1,text:1,type:1,vlink:1},cl={},b3={"=":"n=='%m'","^=":"n.indexOf('%m')==0","*=":"n.indexOf('%m')>-1","|=":"(n+'-').indexOf('%m-')==0","~=":"(' '+n+' ').indexOf(' %m ')>-1","$=":"n.substr(n.length-'%m'.length)=='%m'"},b9={ID:new RegExp("^\\*?#("+aj+"+)|"+aK),TAG:new RegExp("^("+aj+"+)|"+aK),CLASS:new RegExp("^\\*?\\.("+aj+"+$)|"+aK)},ac={spseudos:/^\:((root|empty|nth-)?(?:(first|last|only)-)?(child)?-?(of-type)?)(?:\(([^\x29]*)\))?(.*)/,dpseudos:/^\:(link|visited|target|lang|not|active|focus|hover|checked|disabled|enabled|selected)(?:\((["']*)(.*?(\(.*\))?[^'"()]*?)\2\))?(.*)/,attribute:new RegExp("^\\["+cx+"\\](.*)"),children:/^[\x20\t\n\r\f]*\>[\x20\t\n\r\f]*(.*)/,adjacent:/^[\x20\t\n\r\f]*\+[\x20\t\n\r\f]*(.*)/,relative:/^[\x20\t\n\r\f]*\~[\x20\t\n\r\f]*(.*)/,ancestor:/^[\x20\t\n\r\f]+(.*)/,universal:/^\*(.*)/,id:new RegExp("^#("+aj+"+)(.*)"),tagName:new RegExp("^("+aj+"+)(.*)"),className:new RegExp("^\\.("+aj+"+)(.*)")},cG=function(l,i){var n=-1,m;if(!l.length&&Array.slice){return Array.slice(i)}while((m=i[++n])){l[l.length]=m}return l},cF=function(l,i,o){var n=-1,m;while((m=i[++n])){if(false===o(l[l.length]=m)){break}}return l},b7=function(i,n){var m,l=au;aO=i;au=i.ownerDocument||i;if(n||l!==au){ar=au.documentElement;ap=au.createElement("DiV").nodeName=="DiV";s=!ap&&typeof au.compatMode=="string"?au.compatMode.indexOf("CSS")<0:(function(){var o=au.createElement("div").style;return o&&(o.width=1)&&o.width=="1px"})();m=au.createElement("div");m.appendChild(au.createElement("p")).setAttribute("class","xXx");m.appendChild(au.createElement("p")).setAttribute("class","xxx");cK=!ap&&a2&&s&&(m.getElementsByClassName("xxx").length!=2||m.getElementsByClassName("xXx").length!=2);cJ=!ap&&a4&&s&&(m.querySelectorAll("[class~=xxx]").length!=2||m.querySelectorAll(".xXx").length!=2);an.CACHING&&at.setCache(true,au)}},a1=function(l,i){var n=-1,m=null;while((m=i[++n])){if(m.getAttribute("id")==l){break}}return m},b2=!b8?function(l,i){l=l.replace(/\\/g,"");return i.getElementById&&i.getElementById(l)||a1(l,i.getElementsByTagName("*"))}:function(l,i){var m=null;l=l.replace(/\\/g,"");if(ap||i.nodeType!=9){return a1(l,i.getElementsByTagName("*"))}if((m=i.getElementById(l))&&m.name==l&&i.getElementsByName){return a1(l,i.getElementsByName(l))}return m},ab=function(l,i){b7(i||(i=au));return b2(l,i)},aa=function(l,i){var p=l=="*",o=i,m=[],n=o.firstChild;p||(l=l.toUpperCase());while((o=n)){if(o.tagName>"@"&&(p||o.tagName.toUpperCase()==l)){m[m.length]=o}if((n=o.firstChild||o.nextSibling)){continue}while(!n&&(o=o.parentNode)&&o!==i){n=o.nextSibling}}return m},cr=!ax&&az?function(l,i){return ap||i.nodeType==11?aa(l,i):b0.call(i.getElementsByTagName(l),0)}:function(l,i){var q=-1,o=q,m=[],n,p=i.getElementsByTagName(l);if(l=="*"){while((n=p[++q])){if(n.nodeName>"@"){m[++o]=n}}}else{while((n=p[++q])){m[q]=n}}return m},v=function(l,i){b7(i||(i=au));return cr(l,i)},cE=function(l,i){return aX('[name="'+l.replace(/\\/g,"")+'"]',i)},k=function(l,i){var q=-1,o=q,m=[],n,p=cr("*",i),r;l=" "+(s?l.toLowerCase():l).replace(/\\/g,"")+" ";while((n=p[++q])){r=ap?n.getAttribute("class"):n.className;if(r&&r.length&&(" "+(s?r.toLowerCase():r).replace(aB," ")+" ").indexOf(l)>-1){m[++o]=n}}return m},b1=function(l,i){return(aw||cK||ap||!i.getElementsByClassName)?k(l,i):b0.call(i.getElementsByClassName(l.replace(/\\/g,"")),0)},h=function(l,i){b7(i||(i=au));return b1(l,i)},aZ="compareDocumentPosition" in ar?function(l,i){return(l.compareDocumentPosition(i)&16)==16}:"contains" in ar?function(l,i){return l!==i&&l.contains(i)}:function(l,i){while((i=i.parentNode)){if(i===l){return true}}return false},cD=!b6?function(l,i){return l.getAttribute(i)||""}:function(l,i){i=i.toLowerCase();if(a0[i]){return l[a0[i]]||""}return(af[i]?l.getAttribute(i,2)||"":ag[i]?l.getAttribute(i)?i:"":((l=l.getAttributeNode(i))&&l.value)||"")},aY=!av?function(l,i){return ap?!!l.getAttribute(i):l.hasAttribute(i)}:function(l,i){i=i.toLowerCase();if(a0[i]){return !!l[a0[i]]}l=l.getAttributeNode(i);return !!(l&&(l.specified||l.nodeValue))},g=function(i){i=i.firstChild;while(i){if(i.nodeType==3||i.nodeName>"@"){return false}i=i.nextSibling}return true},f=function(i){return aY(i,"href")&&ai[i.nodeName]},e=function(l,i){var n=1,m=i?"nextSibling":"previousSibling";while((l=l[m])){if(l.nodeName>"@"){++n}}return n},d=function(l,i){var o=1,n=i?"nextSibling":"previousSibling",m=l.nodeName;while((l=l[n])){if(l.nodeName==m){++o}}return o},c=function(l){for(var i in l){an[i]=!!l[i];if(i=="SIMPLENOT"){aW={};aV={};aU={};aT={};an.USE_QSAPI=false;a7=new RegExp(cv,"g")}else{if(i=="USE_QSAPI"){an[i]=!!l[i]&&a4;a7=new RegExp(a5,"g")}}}},ah=function(i){i="SYNTAX_ERR: "+i+" ";if(an.VERBOSITY){if(typeof ae.DOMException!="undefined"){throw {code:12,message:i}}else{throw new Error(12,i)}}else{if(ae.console&&ae.console.log){ae.console.log(i)}else{ae.status+=i}}},an={CACHING:false,SHORTCUTS:false,SIMPLENOT:true,USE_HTML5:false,USE_QSAPI:a4,VERBOSITY:true},aS="r[r.length]=c[k];if(f&&false===f(c[k]))break;else continue main;",aR=function(l,i,q){var o=typeof l=="string"?l.match(a3):l;typeof i=="string"||(i="");if(o.length==1){i+=cC(o[0],q?aS:"f&&f(k);return true;")}else{var m=-1,n={},p;while((p=o[++m])){p=p.replace(a6,"");if(!n[p]&&(n[p]=true)){i+=cC(p,q?aS:"f&&f(k);return true;")}}}if(q){return new Function("c,s,r,d,h,g,f","var N,n,x=0,k=-1,e;main:while((e=c[++k])){"+i+"}return r;")}else{return new Function("e,s,r,d,h,g,f","var N,n,x=0,k=e;"+i+"return false;")}},cC=function(t,r){var p,n,l,m=0,o,q,i,x,y,u;while(t){m++;if((q=t.match(ac.universal))){o=""}else{if((q=t.match(ac.id))){r="if("+(ap?'s.getAttribute(e,"id")':'(e.submit?s.getAttribute(e,"id"):e.id)')+'=="'+q[1]+'"){'+r+"}"}else{if((q=t.match(ac.tagName))){r="if(e.nodeName"+(ap?'=="'+q[1]+'"':'.toUpperCase()=="'+q[1].toUpperCase()+'"')+"){"+r+"}"}else{if((q=t.match(ac.className))){r="if((n="+(ap?'s.getAttribute(e,"class")':"e.className")+')&&n.length&&(" "+'+(s?"n.toLowerCase()":"n")+".replace("+aB+'," ")+" ").indexOf(" '+(s?q[1].toLowerCase():q[1])+' ")>-1){'+r+"}"}else{if((q=t.match(ac.attribute))){o=q[1].split(":");o=o.length==2?o[1]:o[0]+"";if(q[2]&&!b3[q[2]]){ah('Unsupported operator in attribute selectors "'+t+'"');return""}y=false;u="false";if(q[2]&&q[4]&&(u=b3[q[2]])){cH["class"]=s?1:0;q[4]=q[4].replace(/\\([0-9a-f]{2,2})/,"\\x$1");y=(ap?ad:cH)[o.toLowerCase()];u=u.replace(/\%m/g,y?q[4].toLowerCase():q[4])}else{if(q[2]=="!="||q[2]=="="){u="n"+q[2]+'="'+q[4]+'"'}}o="n=s."+(q[2]?"get":"has")+'Attribute(e,"'+q[1]+'")'+(y?".toLowerCase();":";");r=o+"if("+(q[2]?u:"n")+"){"+r+"}"}else{if((q=t.match(ac.adjacent))){r=ay?"var N"+m+"=e;if(e&&(e=e.previousElementSibling)){"+r+"}e=N"+m+";":"var N"+m+'=e;while(e&&(e=e.previousSibling)){if(e.nodeName>"@"){'+r+"break;}}e=N"+m+";"}else{if((q=t.match(ac.relative))){r=ay?("var N"+m+"=e;e=e.parentNode.firstElementChild;while(e&&e!==N"+m+"){"+r+"e=e.nextElementSibling}e=N"+m+";"):("var N"+m+"=e;e=e.parentNode.firstChild;while(e&&e!==N"+m+'){if(e.nodeName>"@"){'+r+"}e=e.nextSibling}e=N"+m+";")}else{if((q=t.match(ac.children))){r="var N"+m+"=e;if(e&&e!==h&&e!==g&&(e=e.parentNode)){"+r+"}e=N"+m+";"}else{if((q=t.match(ac.ancestor))){r="var N"+m+"=e;while(e&&e!==h&&e!==g&&(e=e.parentNode)){"+r+"}e=N"+m+";"}else{if((q=t.match(ac.spseudos))&&q[1]){switch(q[2]){case"root":if(q[7]){r="if(e===h||s.contains(h,e)){"+r+"}"}else{r="if(e===h){"+r+"}"}break;case"empty":r="if(s.isEmpty(e)){"+r+"}";break;default:if(q[2]&&q[6]){if(q[6]=="n"){r="if(e!==h){"+r+"}";break}else{if(q[6]=="even"){p=2;n=0}else{if(q[6]=="odd"){p=2;n=1}else{n=((l=q[6].match(/(-?\d+)$/))?parseInt(l[1],10):0);p=((l=q[6].match(/(-?\d*)n/))?parseInt(l[1],10):0);if(l&&l[1]=="-"){p=-1}}}}y=n<1&&p>1?"(n-("+n+"))%"+p+"==0":p>+1?(q[3]=="last")?"(n-("+n+"))%"+p+"==0":"n>="+n+"&&(n-("+n+"))%"+p+"==0":p<-1?(q[3]=="last")?"(n-("+n+"))%"+p+"==0":"n<="+n+"&&(n-("+n+"))%"+p+"==0":p===0?"n=="+n:(q[3]=="last")?p==-1?"n>="+n:"n<="+n:p==-1?"n<="+n:"n>="+n;r="if(e!==h){n=s["+(q[5]?'"nthOfType"':'"nthElement"')+"](e,"+(q[3]=="last"?"true":"false")+");if("+y+"){"+r+"}}"}else{p=q[3]=="first"?"previous":"next";l=q[3]=="only"?"previous":"next";n=q[3]=="first"||q[3]=="last";u=q[5]?"&&n.nodeName!=e.nodeName":'&&n.nodeName<"@"';r="if(e!==h){"+("n=e;while((n=n."+p+"Sibling)"+u+");if(!n){"+(n?r:"n=e;while((n=n."+l+"Sibling)"+u+");if(!n){"+r+"}")+"}")+"}"}break}}else{if((q=t.match(ac.dpseudos))&&q[1]){switch(q[1]){case"not":o=q[3].replace(a6,"");if(an.SIMPLENOT&&!cu.test(o)){ah('Negation pseudo-class only accepts simple selectors "'+t+'"');return""}else{if("compatMode" in au){r="if(!"+aR([o],"",false)+"(e,s,r,d,h,g)){"+r+"}"}else{r='if(!s.match(e, "'+o.replace(/\x22/g,'\\"')+'",g)){'+r+"}"}}break;case"checked":y='if((typeof e.form!="undefined"&&(/^(?:radio|checkbox)$/i).test(e.type)&&e.checked)';r=(an.USE_HTML5?y+"||(/^option$/i.test(e.nodeName)&&e.selected)":y)+"){"+r+"}";break;case"disabled":r='if(((typeof e.form!="undefined"&&!(/^hidden$/i).test(e.type))||s.isLink(e))&&e.disabled){'+r+"}";break;case"enabled":r='if(((typeof e.form!="undefined"&&!(/^hidden$/i).test(e.type))||s.isLink(e))&&!e.disabled){'+r+"}";break;case"lang":y="";if(q[3]){y=q[3].substr(0,2)+"-"}r='do{(n=e.lang||"").toLowerCase();if((n==""&&h.lang=="'+q[3].toLowerCase()+'")||(n&&(n=="'+q[3].toLowerCase()+'"||n.substr(0,3)=="'+y.toLowerCase()+'"))){'+r+"break;}}while((e=e.parentNode)&&e!==g);";break;case"target":l=au.location?au.location.hash:"";if(l){r='if(e.id=="'+l.slice(1)+'"){'+r+"}"}break;case"link":r="if(s.isLink(e)&&!e.visited){"+r+"}";break;case"visited":r="if(s.isLink(e)&&e.visited){"+r+"}";break;case"active":if(ap){break}r="if(e===d.activeElement){"+r+"}";break;case"hover":if(ap){break}r="if(e===d.hoverElement){"+r+"}";break;case"focus":if(ap){break}r=cs?"if(e===d.activeElement&&d.hasFocus()&&(e.type||e.href)){"+r+"}":"if(e===d.activeElement&&(e.type||e.href)){"+r+"}";break;case"selected":o=b4?"||(n=e.parentNode)&&n.options[n.selectedIndex]===e":"";r="if(/^option$/i.test(e.nodeName)&&(e.selected"+o+")){"+r+"}";break;default:break}}else{o=false;x=true;for(o in cl){if((q=t.match(cl[o].Expression))&&q[1]){i=cl[o].Callback(q,r);r=i.source;x=i.status;if(x){break}}}if(!x){ah('Unknown pseudo-class selector "'+t+'"');return""}if(!o){ah('Unknown token in selector "'+t+'"');return""}}}}}}}}}}}}if(!q){ah('Invalid syntax in selector "'+t+'"');return""}t=q&&q[q.length-1]}return r},aP=function(l,i,o,n){var m;if(!(l&&l.nodeName>"@")){ah("Invalid element argument");return false}else{if(!i||typeof i!="string"){ah("Invalid selector argument");return false}else{if(o&&o.nodeType==1&&!aZ(o,l)){return false}else{if(aO!==o){b7(o||(o=l.ownerDocument))}}}}i=i.replace(a6,"");an.SHORTCUTS&&(i=NW.Dom.shortcuts(i,l,o));if(aJ!=i){if((m=i.match(a7))&&m[0]==i){aL=(m=i.match(a3)).length<2;aJ=i;aH=m}else{ah('The string "'+i+'", is not a valid CSS selector');return false}}else{m=aH}if(!aV[i]||aW[i]!==o){aV[i]=aR(aL?[i]:m,"",false);aW[i]=o}return aV[i](l,aN,[],au,ar,o,n)},b=function(l,i){return aX(l,i,function(){return false})[0]||null},aX=function(u,t,q){var n,l,m,o,r,i,x=u;if(arguments.length===0){ah("Missing required selector parameters");return[]}else{if(u===""){ah("Empty selector string");return[]}else{if(typeof u!="string"){return[]}else{if(t&&!(/1|9|11/).test(t.nodeType)){ah("Invalid context element");return[]}else{if(aO!==t){b7(t||(t=au))}}}}}if(an.CACHING&&(o=at.loadResults(x,t,au,ar))){return q?cF([],o,q):o}if(!aq&&ak.test(u)){switch(u.charAt(0)){case"#":if((m=b2(u.slice(1),t))){o=[m]}else{o=[]}break;case".":o=b1(u.slice(1),t);break;default:o=cr(u,t);break}}else{if(!ap&&an.USE_QSAPI&&!(cJ&&am.test(u))&&!ao.test(u)){try{o=t.querySelectorAll(u)}catch(p){}}}if(o){o=q?cF([],o,q):az?b0.call(o):cG([],o);an.CACHING&&at.saveResults(x,t,au,o);return o}u=u.replace(a6,"");an.SHORTCUTS&&(u=NW.Dom.shortcuts(u,t));if((l=aI!=u)){if((r=u.match(a7))&&r[0]==u){aQ=(r=u.match(a3)).length<2;aI=u;aG=r}else{ah('The string "'+u+'", is not a valid CSS selector');return[]}}else{r=aG}if(t.nodeType==11){o=t.childNodes}else{if(!ap&&aQ){if(l){r=u.match(ct);i=r[r.length-1];b5=i.split(":not")[0];al=u.length-i.length}if((r=b5.match(b9.ID))&&(i=r[1])){if((m=b2(i,t))){if(aP(m,u)){q&&q(m);o=[m]}else{o=[]}}}else{if((r=u.match(b9.ID))&&(i=r[1])){if((m=b2(i,au))){if("#"+i==u){q&&q(m);o=[m]}if(/[>+~]/.test(u)){t=m.parentNode}else{u=u.replace("#"+i,"*");al-=i.length+1;t=m}}else{o=[]}}}if(o){an.CACHING&&at.saveResults(x,t,au,o);return o}if(!a2&&(r=b5.match(b9.TAG))&&(i=r[1])){if((o=cr(i,t)).length===0){return[]}u=u.slice(0,al)+u.slice(al).replace(i,"*")}else{if((r=b5.match(b9.CLASS))&&(i=r[1])){if((o=b1(i,t)).length===0){return[]}if(aA.test(u.charAt(u.indexOf(i)-1))){u=u.slice(0,al)+u.slice(al).replace("."+i,"")}else{u=u.slice(0,al)+u.slice(al).replace("."+i,"*")}}else{if((r=u.match(b9.CLASS))&&(i=r[1])){if((o=b1(i,t)).length===0){return[]}for(n=0,els=[];o.length>n;++n){els=cG(els,o[n].getElementsByTagName("*"))}o=els;if(aA.test(u.charAt(u.indexOf(i)-1))){u=u.slice(0,al)+u.slice(al).replace("."+i,"")}else{u=u.slice(0,al)+u.slice(al).replace("."+i,"*")}}else{if(a2&&(r=b5.match(b9.TAG))&&(i=r[1])){if((o=cr(i,t)).length===0){return[]}u=u.slice(0,al)+u.slice(al).replace(i,"*")}}}}}}if(!o){o=/^(?:applet|object)$/i.test(t.nodeName)?t.childNodes:cr("*",t)}if(!aT[u]||aU[u]!==t){aT[u]=aR(aQ?[u]:r,"",true);aU[u]=t}o=aT[u](o,aN,[],au,ar,t,q);an.CACHING&&at.saveResults(x,t,au,o);return o},aW={},aV={},aU={},aT={},aN={nthElement:e,nthOfType:d,getAttribute:cD,hasAttribute:aY,byClass:b1,byName:cE,byTag:cr,byId:b2,contains:aZ,isEmpty:g,isLink:f,select:aX,match:aP};Tokens={prefixes:a9,encoding:aj,operators:aF,whitespace:w,identifier:cp,attributes:cn,combinators:aE,pseudoclass:a8,pseudoparms:aD,quotedvalue:aM};at.ACCEPT_NODE=aS;at.emit=ah;at.byId=ab;at.byTag=v;at.byName=cE;at.byClass=h;at.getAttribute=cD;at.hasAttribute=aY;at.match=aP;at.first=b;at.select=aX;at.compile=aR;at.contains=aZ;at.configure=c;at.setCache=function(){return};at.loadResults=function(){return};at.saveResults=function(){return};at.shortcuts=function(i){return i};at.Config=an;at.Snapshot=aN;at.Operators=b3;at.Selectors=cl;at.Tokens=Tokens;at.registerOperator=function(l,i){b3[l]||(b3[l]=i)};at.registerSelector=function(l,i,m){cl[l]||(cl[l]={Expression:i,Callback:m})};b7(au,true)})(this);var tuba_id="embed_iframe";var tuba={debug:function(){try{return Boolean(localStorage.getItem("debug"))}catch(a){return true}},parameters:{api:"http://fm.tuba.pl/api3/",base:"http://fm.tuba.pl",basePlayer:"http://fm.tuba.pl/player",baseIframe:"http://fm.tuba.pl/iframe",appId:"1111111111111111",id:tuba_id,selectors:[".newsnavinfo a",".v_twags a",".v_tags a",".personsCreationsRelatedFromGallery a","#gazeta_article_tags a","#naboo_artist_name","#naboo_artist_name a"],style:"#"+tuba_id+"{-moz-transition:width 0!important;-ms-transition:width .4s;-o-transition:width .4s;-webkit-transition:width .4s;transition:width .4s;height:250px;overflow:hidden;position:fixed;right:-50px;top:20%;width:60px;z-index:101}#"+tuba_id+".ready{right:0}#"+tuba_id+".visual{width:180px}#"+tuba_id+".volume_box{width:280px}#"+tuba_id+".catalog{height:400px;width:380px}#"+tuba_id+".catalog:hover,#"+tuba_id+".catalog.visual{height:400px;width:500px}[data-active-"+tuba_id+'="false"]{display: none;}[data-active-'+tuba_id+'="true"]{display: block;}',popup:"top=30,left="+(screen.width-380)+",location=no,scrollbars=no,menubar=no,status=no,titlebar=no,toolbar=no,resizable=no,width=720,height=660",pluginId:"tuba.fm",pluginParam:'data-plugin="tuba.fm"',script:"add.test.js",version:"1.2.3",tags:[],rpc:{},document:{},autocompleteOrder:[3,0,4],autocomplete:false,debug:true,radio:false,volume:"volume_obj",window:0},ready:function(d){if(typeof console==="undefined"||typeof console.log==="undefined"){console={};console.log=function(){}}else{if(!tuba.debug()){console={};console.log=function(){}}}if(tuba.done){return}tuba.done=true;var a=(window.TP!=undefined)?window.TP.options:false;if(a.appId){var c={"1111111111111111":{base:"http://fm.tuba.pl",basePlayer:"http://fm.tuba.pl/player",baseIframe:"http://fm.tuba.pl/iframe"},"1111111111111110":{base:"http://alpha.fm.tuba.pl",basePlayer:"http://alpha.fm.tuba.pl/player",baseIframe:"http://alpha.fm.tuba.pl/iframe"},"1000000000000001":{base:"http://zp.tuba.pl",basePlayer:"http://zp.tuba.pl/player",baseIframe:"http://zp.tuba.pl/iframe"},"1000000000000002":{base:"http://rr.tuba.pl",basePlayer:"http://rr.tuba.pl/player",baseIframe:"http://rr.tuba.pl/iframe"},"1000000000000003":{base:"http://tok.tuba.pl",basePlayer:"http://tok.tuba.pl/player",baseIframe:"http://tok.tuba.pl/iframe"},"1000000000000004":{base:"http://onet.tuba.pl",basePlayer:"http://player.radio.onet.pl/onet",baseIframe:"http://onet.tuba.pl/iframe"},"1000000000000005":{base:"http://nk.tuba.pl",basePlayer:"http://nk.tuba.pl/player",baseIframe:"http://nk.tuba.pl/iframe"},"1000000000000008":{base:"http://wyborcza.tuba.pl",basePlayer:"http://wyborcza.tuba.pl/player",baseIframe:"http://wyborcza.tuba.pl/iframe",selectors:[]},"1000000000000009":{base:"http://fm.tuba.pl",basePlayer:"http://fm.tuba.pl/player",baseIframe:"http://fm.tuba.pl/iframe"},"1000000000000010":{base:"http://fm.tuba.pl",basePlayer:"http://fm.tuba.pl/player",baseIframe:"http://fm.tuba.pl/iframe"},"1000000000000011":{base:"http://fm.tuba.pl",basePlayer:"http://fm.tuba.pl/player",baseIframe:"http://fm.tuba.pl/iframe"},"1000000000000012":{base:"http://fm.tuba.pl",basePlayer:"http://fm.tuba.pl/player?list=ulubione&user=sport.pl",baseIframe:"http://fm.tuba.pl/iframe?list=ulubione&user=sport.pl"},"1000000000000013":{base:"http://fm.tuba.pl",basePlayer:"http://fm.tuba.pl/player?list=ulubione&user=sport.pl",baseIframe:"http://fm.tuba.pl/iframe?list=ulubione&user=sport.pl"},"1000000000000014":{base:"http://fm.tuba.pl",basePlayer:"http://fm.tuba.pl/player",baseIframe:"http://fm.tuba.pl/iframe"},"1000000000000015":{base:"http://fm.tuba.pl",basePlayer:"http://fm.tuba.pl/player",baseIframe:"http://fm.tuba.pl/iframe"},"1000000000000016":{base:"http://fm.tuba.pl",basePlayer:"http://fm.tuba.pl/player?user=terazrock",baseIframe:"http://fm.tuba.pl/iframe?user=terazrock"}};if(a.appId in c){var b=c[a.appId];for(key in b){a[key]=b[key]}}}if(a){for(key in a){tuba.parameters[key]=a[key]}}tuba.init()},init:function(c){if(/(iPad)|(iPhone)|(iPod)|(android)|(webOS)|(windows phone)|(MSIE [4-7])/i.test(navigator.appVersion)){return false}tuba.commons.addEvent(window,"message",function(d){if(d.origin===tuba.parameters.base){tuba.RPC.read(d.data,function(e){d.source.postMessage(e,d.origin)})}});if(tuba.parameters.autocomplete){tuba.parameters.autocomplete=tuba.parameters.autocomplete.split(",");tuba.autocomplete.init(tuba.parameters.autocomplete[0],tuba.parameters.autocomplete[1])}if(tuba.parameters.volume){window[tuba.parameters.volume]={};window[tuba.parameters.volume].volume=tuba.actions.volume;tuba.parameters.volume=true}if(tuba.parameters.style){var b=document.createElement("style");styles=tuba.parameters.style;try{b.type="text/css";b.innerHTML=styles}catch(c){if(b.textContent){b.textContent=styles}else{b.styleSheet.cssText=styles}}document.getElementsByTagName("head")[0].appendChild(b)}if(tuba.parameters.baseIframe){var a={};if(tuba.parameters.channel){a.channel=tuba.parameters.channel}if(tuba.parameters.appId){a.appId=tuba.parameters.appId}tuba.parameters.iframe=tuba.commons.createIframe({id:tuba.parameters.id,name:tuba.commons.guid("tp"),onload:function(g){g.className="ready";console.log(g.className);var f=tuba.RPC.call("info",["iframe loaded"],true);if(tuba.parameters.selectors.length){for(var e=tuba.parameters.selectors.length;e>=0;e--){NW.Dom.select(tuba.parameters.selectors[e],null,function(h){tuba.parameters.tags.push(h.innerHTML)})}if(tuba.parameters.tags.length){var d=[f,tuba.RPC.call("findeContextRadio",[tuba.parameters.tags]),tuba.RPC.call("log",[tuba.parameters.tags])]}}tuba.commons.postMessage(d||f)},url:tuba.commons.QueryString.appendToUrl(tuba.parameters.baseIframe,a)});tuba.commons.addEvent(tuba.parameters.iframe,"onmouseout",function(){tuba.parameters.inobject=false;if(tuba.parameters.timeout){clearTimeout(tuba.parameters.timeout)}tuba.parameters.timeout=setTimeout(function(){if(tuba.parameters.inobject){return}tuba.parameters.iframe.className="ready";var d=[tuba.RPC.call("removeAttribute",["catalog","data-status"]),tuba.RPC.call("removeAttribute",["volume_box","data-status"])];tuba.commons.postMessage(d)},3000)});tuba.commons.addEvent(tuba.parameters.iframe,"onmouseover",function(){if(tuba.parameters.timeout){clearTimeout(tuba.parameters.timeout)}tuba.parameters.inobject=true})}tuba.commons.delegate()},RPC:{counter:0,callbacks:{},errors:{32700:"Parse error",32600:"Invalid Request",32601:"Method not found",32602:"Invalid params",32603:"Internal error",32000:"Server error"},read:function(k,b,a){function g(e,m){this.message=tuba.RPC.errors[e];this.code=0-e;this.id=m||null}g.prototype=new Error();g.prototype.constructor=g;try{var c=false,i=[],d=JSON.parse(k);if(!(Object.prototype.toString.call(d)==="[object Array]")){d=[d]}else{c=true}while(d.length){var l=d.shift();if(l.jsonrpc!="2.0"){throw new g(32600,l.id)}if(l.error){console.log("RPC Error (id "+l.id+"): ",l.error)}else{if(typeof l.result!=="undefined"){console.log("RPC result: (id "+l.id+")",l.result);if(tuba.RPC.callbacks[l.id]){var j=tuba.RPC.callbacks[l.id];delete tuba.RPC.callbacks[l.id];delete l.id;delete l.jsonrpc;j(l.result);return}}else{if(l.method){try{value=tuba.actions[l.method].apply(null,l.params);if(l.id){i.push(tuba.RPC.write("result",value,l.id))}}catch(h){if(l.id){if(h instanceof TypeError){throw new g(32601,l.id)}}}}else{throw new g(32600,l.id)}}}}}catch(f){if(f instanceof g){i.push(tuba.RPC.write("error",{code:f.code,message:f.message},f.id||null))}else{console.log("Unknown RPC error, name: ",f.name,"message: ",f.message)}}finally{var k=i.length?(JSON.stringify(c?i:i.shift())):false;if(k){b(k)}}},write:function(b,c,d){var a={jsonrpc:"2.0",id:d||null};a[b]=c;return a},call:function(f,c,b,e){var a={jsonrpc:"2.0",method:f,params:c};if(!b){var d=++tuba.RPC.counter;a.id=d;if(e){tuba.RPC.callbacks[d]=e}}console.log("RPC.call: ",a);return a}},autocomplete:{callback:function(k,b){b=b||false;type=parseInt(k.basic_type,10);if((k.pid!=tuba.autocomplete.parameters[type]["pid"])&&!b){return}if(!tuba.autocomplete.parameters[type]["list"]["cache_"+k.query]){tuba.autocomplete.parameters[type]["list"]["cache_"+k.query]=k}var m=tuba.parameters.pluginId+":autocomplete";var u="<table>";u+='<tbody id="'+m+'">';if(k.data.length){var d=tuba.parameters.autocompleteOrder;var j=[{key:"a",label:"podobni do",name:"artyści",single:"artysta"},{key:"b",label:"autor: ",name:"wasze radia",single:"radio-użytkownika"},{key:"c",name:"radia tuby",single:"radio"},{key:"d",label:"tylko",name:"artyści",single:"artysta"},{key:"e",name:"gatunki",single:"gatunek"}];var c={},n=6,h={};for(var g in k.data){var q=k.data[g].type;if(d.join("").indexOf(q)>=0){var o=j[q].key;if(c[o]===undefined){c[o]=[]}c[o].push(k.data[g])}}for(var g=0,f=d.length;g<f;g++){var o=j[d[g]].key;if(o in c){h[o]=(o=="a"&&c.d!==undefined)?"":'<tr><th colspan="2">'+j[d[g]].name+"</th></tr>"}}if(JSON.stringify(c)!="{}"){while(n>0){for(var g=0,f=d.length;g<f;g++){var o=j[d[g]].key;if(o in c){var p=c[o][0];var a='<tr class="result">';a+=(j[d[g]].label)?"<td><span>"+j[d[g]].label+((p.user_login)?p.user_login:"")+"</span></td>":"<td></td>";a+='<td><button data-value="'+p.keyword+'" class="radio" data-id="'+p.id+'" data-type="'+p.type+'" data-action="radio" title="Włącz radio '+p.keyword+'">'+p.keyword+"</button></td>";a+="</tr>";h[o]+=a;c[o].shift();if(!c[o].length){delete c[o]}if(JSON.stringify(c)==="{}"){n=0}else{n--}}}}}for(o in h){u+=h[o]}u+="</tbody>";u+='<tfoot><tr><td colspan="3"></td></tr></tfoot>'}else{u+='<tfoot><tr><td colspan="3">frazy nie znaleziono</td></tr></tfoot>'}tuba.autocomplete.parameters[type]["result"].innerHTML=u;tuba.autocomplete.parameters[type].results=document.getElementById(m).childNodes;g=0;for(o in tuba.autocomplete.parameters[type].results){if(tuba.autocomplete.parameters[type].results[o].className=="result"){tuba.autocomplete.parameters[type].results[o].setAttribute("data-position",g);tuba.autocomplete.parameters[type].results[o].setAttribute("id","position:"+g++)}else{delete tuba.autocomplete.parameters[type].results[o]}}tuba.autocomplete.parameters[type].position=-1;tuba.autocomplete.parameters[type].lastPosition=0;tuba.commons.show(tuba.autocomplete.parameters[type].result)},clear:function(a){tuba.commons.hide(tuba.autocomplete.parameters[a].result)},request:function(a){tuba.autocomplete.parameters[a]["keydown"]=true;tuba.autocomplete.parameters[a]["keyword"]=tuba.autocomplete.parameters[a]["query"].value.toString();if(tuba.autocomplete.parameters[a]["keyword"].length==0){tuba.autocomplete.clear(a);return}if(!tuba.autocomplete.parameters[a]["list"]["cache_"+tuba.autocomplete.parameters[a]["keyword"].toString()]){tuba.autocomplete.parameters[a]["pid"]=(new Date()).getTime();switch(tuba.autocomplete.parameters[a]["type"]){default:var b=tuba.parameters.api3+"autocomplete?query="+encodeURIComponent(tuba.autocomplete.parameters[a]["keyword"])+"&format=jsonp&callback=tuba.autocomplete.callback&pid="+encodeURIComponent(tuba.autocomplete.parameters[a]["pid"])+"&basic_type="+encodeURIComponent(a);break}tuba.commons.loadScript(b)}else{tuba.autocomplete.callback(tuba.autocomplete.parameters[a]["list"]["cache_"+tuba.autocomplete.parameters[a]["keyword"]],true)}},onblur:function(b,a){setTimeout(function(c){tuba.autocomplete.clear(a)},1000)},onfocus:function(b,a){if(tuba.autocomplete.parameters[a]["pid"]){if(tuba.autocomplete.parameters[a]["result"].innerHTML.length!=0){tuba.commons.show(tuba.autocomplete.parameters[a]["result"])}}},onkeydown:function(d,g){d.stopPropagation();var i=8;var j=46;var h=40;var c=38;var b=27;var a=32;var f=13;switch(tuba.commons.keyPress(d)){case f:tuba.autocomplete.parameters[g]["ignore"]=false;break;case b:tuba.autocomplete.clear(g);if(tuba.autocomplete.parameters[g]["keyword"]){tuba.autocomplete.parameters[g]["query"].value=tuba.autocomplete.parameters[g]["keyword"]}tuba.autocomplete.parameters[g]["ignore"]=true;break;case h:tuba.autocomplete.parameters[g].lastPosition=tuba.autocomplete.parameters[g].position;tuba.autocomplete.parameters[g].position++;if(tuba.autocomplete.parameters[g].position>tuba.autocomplete.parameters[g].results.length-1){tuba.autocomplete.parameters[g].position=0}if(tuba.autocomplete.parameters[g]["lastPosition"]!=tuba.autocomplete.parameters[g]["position"]){NW.Dom.select("tr[data-position]",tuba.autocomplete.parameters[g]["result"],function(e){e.className=""});if(tuba.autocomplete.parameters[g]["position"]==-1){tuba.autocomplete.parameters[g]["query"].value=tuba.autocomplete.parameters[g]["keyword"]}else{NW.Dom.select('tr[data-position="'+tuba.autocomplete.parameters[g]["position"]+'"] button',tuba.autocomplete.parameters[g]["result"],function(e){tuba.autocomplete.parameters[g]["query"].value=e.getAttribute("data-value")})}}NW.Dom.select('tr[data-position="'+tuba.autocomplete.parameters[g]["position"]+'"]',tuba.autocomplete.parameters[g]["result"],function(e){e.className="active"});tuba.autocomplete.parameters[g]["ignore"]=true;break;case c:tuba.autocomplete.parameters[g]["lastPosition"]=tuba.autocomplete.parameters[g]["position"];tuba.autocomplete.parameters[g]["position"]--;if(tuba.autocomplete.parameters[g]["position"]<-1){tuba.autocomplete.parameters[g]["position"]=tuba.autocomplete.parameters[g]["counter"]-1}if(tuba.autocomplete.parameters[g]["lastPosition"]!=tuba.autocomplete.parameters[g]["position"]){NW.Dom.select("tr[data-position]",tuba.autocomplete.parameters[g]["result"],function(e){e.className=""});if(tuba.autocomplete.parameters[g]["position"]==-1){tuba.autocomplete.parameters[g]["query"].value=tuba.autocomplete.parameters[g]["keyword"]}else{NW.Dom.select('tr[data-position="'+tuba.autocomplete.parameters[g]["position"]+'"] button',tuba.autocomplete.parameters[g]["result"],function(e){tuba.autocomplete.parameters[g]["query"].value=e.getAttribute("data-value")})}}NW.Dom.select('tr[data-position="'+tuba.autocomplete.parameters[g]["position"]+'"]',tuba.autocomplete.parameters[g]["result"],function(e){e.className="active"});tuba.autocomplete.parameters[g]["ignore"]=true;break;default:break}},onkeyup:function(c,b){if(tuba.autocomplete.parameters[b]["ignore"]){tuba.autocomplete.parameters[b]["ignore"]=false;return false}if(tuba.commons.keyPress(c)==13){var a=tuba.autocomplete.parameters[b]["position"];if(a!=-1){var d=document.getElementById("position:"+a);NW.Dom.select('tr[data-position="'+tuba.autocomplete.parameters[b]["position"]+'"] .radio',tuba.autocomplete.parameters[b]["result"],function(f){var e=document.createElement("button");e.setAttribute("data-action","radio");e.setAttribute("data-id",f.getAttribute("data-id"));e.setAttribute("data-type",f.getAttribute("data-type"));tuba.actions.radio.init(e);setTimeout(function(g){tuba.autocomplete.clear(b)},1000)})}return false}if(typeof tuba.autocomplete.parameters[b]["keydown"]=="undefined"){tuba.autocomplete.parameters[b]["keydown"]=true}if(tuba.autocomplete.parameters[b]["keydown"]){setTimeout(function(f){tuba.autocomplete.request(b)},500)}tuba.autocomplete.parameters[b]["keydown"]=false},init:function(c,a,b){if(!document.getElementById(c)||!document.getElementById(a)){return false}b=b||0;tuba.autocomplete.parameters=[];tuba.autocomplete.parameters[b]={};tuba.autocomplete.parameters[b]["query"]=document.getElementById(c);tuba.autocomplete.parameters[b]["result"]=document.getElementById(a);tuba.autocomplete.parameters[b]["type"]=b;tuba.autocomplete.parameters[b]["list"]=[];tuba.autocomplete.parameters[b]["query"].setAttribute("autocomplete","off");tuba.autocomplete.parameters[b]["position"]=-1;if(tuba.autocomplete.parameters[b]["query"]){tuba.commons.addEvent(tuba.autocomplete.parameters[b]["query"],"keyup",function(d){tuba.autocomplete.onkeyup(d,b)},false);tuba.commons.addEvent(tuba.autocomplete.parameters[b]["query"],"keydown",function(d){tuba.autocomplete.onkeydown(d,b)},false);tuba.commons.addEvent(tuba.autocomplete.parameters[b]["query"],"blur",function(d){tuba.autocomplete.onblur(d,b)},false);tuba.commons.addEvent(tuba.autocomplete.parameters[b]["query"],"focus",function(d){tuba.autocomplete.onfocus(d,b)},false)}}},actions:{setAttribute:function(d,b,c){var a=document.getElementById(d);a.setAttribute(b,c);return true},removeAttribute:function(c,b){var a=document.getElementById(c);a.removeAttribute(b);return true},removeClass:function(c,a){var b=document.getElementById(c);b.className=b.className.replace(new RegExp("(?:^|\\s)"+a+"(?!\\S)"),"");return true},addClass:function(c,a){var b=document.getElementById(c);if(!(~b.className.indexOf(a))){b.className+=" "+a}return true},pass:function(a){console.log(a);return true},volume:function(b){if(!tuba.parameters.volume){return}var a=tuba.RPC.call("set",["volume",b]);tuba.commons.postMessage(a)},set:function(a,b){if(a in tuba.parameters){tuba.parameters[a]=b;return true}else{return false}},"set-volume":{init:function(a){if(!tuba.parameters.volume){return}tuba.actions.volume(a.getAttribute("data-value"))}},radio:{init:function(b,d){if(!tuba.parameters.radio){return}var a={id:b.getAttribute("data-id"),type:b.getAttribute("data-type")};if(tuba.parameters.channel){a.channel=tuba.parameters.channel}if(tuba.parameters.appId){a.appId=tuba.parameters.appId}a=tuba.commons.QueryString.appendToUrl(tuba.parameters.basePlayer,a);switch(tuba.parameters.window){case 0:window.open(a,"popup",tuba.parameters.popup);tuba.parameters.window=2;break;case 1:var c=tuba.RPC.call("radio",[a]);tuba.commons.postMessage(c);break;case 2:console.info("Window not ready");break;default:console.error("Something is wrong, reloading…");document.location=document.location;break}}}},commons:{postMessage:function(a){tuba.parameters.iframe.contentWindow.postMessage(JSON.stringify(a),tuba.parameters.base)},guid:function(a){return(a||"_")+(Math.random()*(1<<30)).toString(16).replace(".","")},copyProperties:function(h,q,p,o,m,l,k){h=h||{};if(tuba.debug&&k){throw new Error("Too many arguments passed to copyProperties")}var n=[q,p,o,m,l];var j=0,g;while(n[j]){g=n[j++];for(var r in g){h[r]=g[r]}if(g.hasOwnProperty&&g.hasOwnProperty("toString")&&(typeof g.toString!="undefined")&&(h.toString!==g.toString)){h.toString=g.toString}}return h},createIframe:function(a){var b=document.createElement("iframe");b.frameBorder=0;b.scrolling="no";b.allowTransparency=true;b.id=a.id;b.name=a.name;tuba.commons.copyProperties(b.style,(a.style||{border:"none"}));onLoad=a.onload;b.src="javascript:false";document.body.appendChild(b);if(onLoad){var c=tuba.commons.addEvent(b,"load",function(){onLoad(this)})}b.src=a.url;return b},QueryString:{encode:function(a){var c=[];for(key in a){var b=a[key];if(typeof b!=="undefined"){if(b===null){c.push(key)}else{c.push(encodeURIComponent(key)+"="+encodeURIComponent(b))}}}return c.join("&")},decode:function(g,a){var e={};if(g===""){return e}var d=g.split("&");for(var c=0;c<d.length;c++){var f=d[c].split("=",2);var b=decodeURIComponent(f[0]);if(a&&e.hasOwnProperty(b)){throw new URIError("Duplicate key: "+b)}e[b]=f.length===2?decodeURIComponent(f[1]):null}return e},appendToUrl:function(a,b){return a+(~a.indexOf("?")?"&":"?")+(typeof b==="string"?b:this.encode(b))}},hide:function(a){if(a){a.setAttribute("data-active-"+tuba_id,"false")}},show:function(a){if(a){a.setAttribute("data-active-"+tuba_id,"true")}},loadScript:function(b,c){var c=c||false;var a=document.createElement("script");a.type="text/javascript";a.async=true;a.src=b;a.onreadystatechange=function(){if(this.readyState=="complete"){if(c){c()}}};if(c){a.onload=c}setTimeout(function(){var d=a;document.getElementsByTagName("head")[0].appendChild(d)},1)},keyPress:function(b){var a;if(window.event){a=window.event.keyCode}else{if(b){a=(b.which)?b.which:b.keyCode}}return a},addEvent:function(c,b,a){if(c.addEventListener){c.addEventListener(b,a,false)}else{if(c.attachEvent){c["e"+b+a]=a;c[b+a]=function(){c["e"+b+a](window.event)};c.attachEvent("on"+b,c[b+a])}}},delegate:function(a){var b=this,a=a||document.body;a.onclick=function(g){var c=g&&g.target||event.srcElement;var i=tuba.parameters.basePlayer.split("?");if(c.getAttribute("href")&&c.getAttribute("href").search(i[0])>=0){var h={};c.getAttribute("href").replace(new RegExp("([^?=&]+)(=([^&]*))?","g"),function(j,e,l,k){h[e]=k});if(h.id!=="undefined"&&h.type!=="undefined"){c.setAttribute("data-id",h.id);c.setAttribute("data-type",h.type);c.setAttribute("data-action","radio")}}var f=c.getAttribute("data-action");if(f&&tuba.actions&&tuba.actions[f]){try{tuba.actions[f].init(c);return false}catch(d){}}}}}};var domIsReady="readyState" in document?/loaded|complete/.test(document.readyState):!!document.body;if(!domIsReady){if(document.addEventListener){document.addEventListener("DOMContentLoaded",tuba.ready,false);window.addEventListener("load",tuba.ready,false)}else{if(document.attachEvent){document.attachEvent("onreadystatechange",tuba.ready);window.attachEvent("onload",tuba.ready)}}}else{tuba.ready()};