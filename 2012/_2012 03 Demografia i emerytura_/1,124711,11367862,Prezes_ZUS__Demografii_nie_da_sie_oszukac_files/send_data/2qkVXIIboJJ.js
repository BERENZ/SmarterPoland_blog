/*1331761907,169776320*/

if (window.CavalryLogger) { CavalryLogger.start_js(["nlJs+"]); }

window.__DEV__=window.__DEV__||0;if(!window.skipDomainLower&&document.domain.toLowerCase().match(/(^|\.)facebook\..*/))document.domain=window.location.hostname.replace(/^.*(facebook\..*)$/i,'$1');function bagofholding(){}function bagof(a){return function(){return a;};}if(!Date.now)Date.now=function now(){return new Date().getTime();};if(!Array.isArray)Array.isArray=function(a){return Object.prototype.toString.call(a)=='[object Array]';};if(!Object.create)Object.create=function create(a){var b=new Function();b.prototype=a;return new b();};Env=window.Env||{};Env.start=Env.start||Date.now();document.documentElement.className=document.documentElement.className.replace('no_js','');
(function(a){if(a.require)return;var b={},c={},d=0,e=1,f=2,g='special',h='refcount',i='exports',j='dependencies',k='module',l='waiting',m='factory',n=undefined,o='define',p='global',q='require',r='requireLazy',s='requireDynamic',t='context';function u(fa){var ga=b[fa],ha,ia;if(ga[l]&&ga[g]&f)x();if(!ga[i]){var ja=ga[i]={},ka=ga[m];if(Object.prototype.toString.call(ka)==='[object Function]'){var la=[],ma=ga[j],na=ma.length;if(ga[g]&f)na=Math.min(na,ka.length);for(ia=0;ia<na;ia++){ha=ma[ia];la.push(ha===k?ga:(ha===i?ja:u(ha)));}var oa=ka.apply(ga[t]||a,la);if(oa)ga[i]=oa;}else ga[i]=ka;}if(ga[h]--===1)delete b[fa];return ga[i];}function v(fa,ga,ha,ia,ja,ka){if(ga===n){ga=[];ha=fa;fa=z();}else if(ha===n){ha=ga;ga=fa;fa=z();}var la=b[fa]||{id:fa};if(ka)la[h]=(la[h]||0)+ka;if(b[fa])return;la[m]=ha;la[j]=ga;la[t]=ja;la[g]=ia;b[fa]=la;aa(fa);}function w(fa,ga,ha){v(fa,ga,n,e,ha,1);}function x(){var fa={},ga;for(ga in c)if(b[ga]&&!fa[ga]&&b[ga][g]&f)y({},ga,fa);}function y(fa,ga,ha){ha[ga]=1;var ia=c[ga],ja;if(!ia)return;fa[ga]=1;for(ja in ia){if(!b[ja][g]&f)continue;if(fa[ja]){delete ia[ja];b[ja][l]--;if(!b[ja][l])ba(ja);}else y(fa,ja,ha);}fa[ga]=0;}function z(){return '__mod__'+d++;}function aa(fa){var ga=b[fa],ha=0;for(var ia=0;ia<ga[j].length;ia++){var ja=ga[j][ia];if(!b[ja]||b[ja][l]){c[ja]||(c[ja]={});if(!c[ja][fa])ha++;c[ja][fa]=1;}}ga[l]=ha;if(!ha)ba(fa);}function ba(fa){var ga=b[fa];if(ga[g]&e)u(fa);var ha=c[fa];if(ha){delete c[fa];for(var ia in ha)if(!--b[ia][l])ba(ia);}}function ca(fa,ga){b[fa]={id:fa};b[fa][i]=ga;}ca(k,0);ca(i,0);ca(o,v);ca(p,a);ca(q,u);ca(s,u);ca(r,w);v.amd={};a[o]=v;a[q]=u;a[s]=u;a[r]=w;var da=false,ea=function(fa,ga,ha,ia){v(fa,ga,ha,ia||f);if(b[fa][l]&&!da)da=setTimeout(function(){x();da=false;},9);};a.__d=function(fa,ga,ha,ia){ga=[p,q,s,r,k,i].concat(ga);ea(fa,ga,ha,ia);};a.__e=a.__d;})(this);
__d("hasArrayNature",[],function(a,b,c,d,e,f){function g(h){return (!!h&&(typeof h=='object'||typeof h=='function')&&('length' in h)&&!('setInterval' in h)&&(Object.prototype.toString.call(h)==="[object Array]"||('callee' in h)||('item' in h)));}e.exports=g;});
__d("ArrayUtils",["hasArrayNature"],function(a,b,c,d,e,f){var g=b("hasArrayNature"),h={createFrom:function(i){if(!g(i))return [i];if(i.item){var j=i.length,k=new Array(j);while(j--)k[j]=i[j];return k;}return Array.prototype.slice.call(i);}};e.exports=h;});
__d("copyProperties",[],function(a,b,c,d,e,f){function g(h,i){h=h||{};i=i||{};for(var j in i)h[j]=i[j];if(i.hasOwnProperty&&i.hasOwnProperty('toString')&&(typeof i.toString!='undefined')&&(h.toString!==i.toString))h.toString=i.toString;return h;}e.exports=g;});
__d("function-extensions",["ArrayUtils","copyProperties"],function(a,b,c,d,e,f){var g=b('ArrayUtils'),h=b('copyProperties'),i=Array.prototype.slice;Function.mixin=function(){var j=a.Mixins||{};for(var k=1,l=arguments.length;k<l;++k)h(arguments[0],j[arguments[k]]||arguments[k]);};if(!Function.prototype.bind)Function.prototype.bind=function __facebookBind(j){if(typeof this!=='function')throw new TypeError('Bind must be called on a function');var k=this,l=i.call(arguments,1);function m(){return k.apply(j,l.concat(i.call(arguments)));}m.displayName='bound:'+(k.displayName||k.name||'anonymous');m.toString=function(){return 'bound: '+k;};return m;};Function.prototype.curry=function(){var j=g.createFrom(arguments);return this.bind.apply(this,[null].concat(j));};Function.prototype.shield=function(j){if(typeof this!='function')throw new TypeError();var k=this.bind.apply(this,g.createFrom(arguments));return function(){return k();};};Function.prototype.defer=function(j,k){if(typeof this!='function')throw new TypeError();j=j||0;return setTimeout(this,j,k);};},3);
__d("Env",["copyProperties"],function(a,b,c,d,e,f){var g=b("copyProperties"),h={start:Date.now()};if(a.Env){g(h,a.Env);a.Env=undefined;}e.exports=h;});
__d("Util",[],function(a,b,c,d,e,f){if(typeof console=='undefined')a.console={log:bagofholding,info:bagofholding,warn:bagofholding,debug:bagofholding,dir:bagofholding,error:bagofholding};e.exports=a.console;});
__d("ErrorUtils",["Env","Util"],function(a,b,c,d,e,f){var g=b("Env"),h=b("Util"),i=[],j=[],k=window.chrome&&'type' in new Error();function l(q){if(!q){return {};}else if(q._originalError)return q;var r={line:q.lineNumber||q.line,message:q.message,name:q.name,script:q.fileName||q.sourceURL,stack:q.stackTrace||q.stack};r._originalError=q;if(k&&/(\w{3,5}:\/\/[^:]+):(\d+)/.test(q.stack)){r.script=RegExp.$1;r.line=parseInt(RegExp.$2,10);}for(var s in r)(r[s]==null&&delete r[s]);return r;}function m(q,r){q=l(q);!r;if(j.length<100)j.push(q);for(var s=0;s<i.length;s++)try{i[s](q);}catch(t){}}function n(q,r,s,t){if(g.nocatch||(/nocatch/).test(location.search))return q.apply(r,s||[]);try{return q.apply(r,s||[]);}catch(u){var v=l(u);if(t)t(v);v.callee=q;if(s)v.args=s;m(v);}}function o(q,r,s){m({message:q,script:r,line:s},true);}window.onerror=o;function p(q,r){i.push(q);if(r)for(var s=0;s<j.length;s++)q(j[s]);}e.exports={onerror:o,history:j,reportError:m,normalizeError:l,applyWithGuard:n,addListener:function(q){i.push(q);}};});
__d("ServerJS",["function-extensions","ErrorUtils","copyProperties"],function(a,b,c,d,e,f){b("function-extensions");var g=b("ErrorUtils"),h=b("copyProperties");function i(){this._moduleMap={};this._relativeTo=null;}h(i.prototype,{handle:function(n){g.applyWithGuard(function(o){k(o.require||[],this._handleRequire,this);k(o.define||[],this._handleDefine,this);k(o.instances||[],this._handleInstance,this);k(o.markup||[],this._handleMarkup,this);},this,[].concat(n));},handlePartial:function(n){if(n.instances)for(var o=0;o<n.instances.length;o++)l(this._moduleMap,3,n.instances[o]);if(n.markup)for(o=0;o<n.markup.length;o++)l(this._moduleMap,2,n.markup[o]);this.handle(n);},cleanup:function(){var n=[];for(var o in this._moduleMap)n.push(o);d.call(null,n,m);this._moduleMap={};},setRelativeTo:function(n){this._relativeTo=n;return this;},_handleDefine:function(n,o,p){define(n,o,function(){this._replaceTransportMarkers(p);return p;}.bind(this));},_handleRequire:function(n,o,p,q){var r=[n].concat(p||[]);d(r,function(s){q&&this._replaceTransportMarkers(q);o&&s[o].apply(s,q||[]);}.bind(this));},_handleInstance:function(n,o,p,q){define(n,o,function(r){this._replaceTransportMarkers(p);var s=function(){};s.prototype=r.prototype;var t=new s();r.apply(t,p);return t;}.bind(this),0,null,q);},_handleMarkup:function(n,o,p){define(n,['HTML'],function(q){return q.replaceJSONWrapper(o).getRootNode();},0,null,p);},_replaceTransportMarkers:function(n,o){var p=(typeof o!=='undefined')?n[o]:n,q;if(Array.isArray(p)){for(q=0;q<p.length;q++)this._replaceTransportMarkers(p,q);}else if(p&&typeof p=='object')if(p.__m){n[o]=b(p.__m);}else if(p.__e){n[o]=j(p.__e,p.root?b(p.root):null);}else if(p.__rel){n[o]=this._relativeTo;}else for(var r in p)this._replaceTransportMarkers(p,r);}});function j(n,o){var p;if(o){if(o.id==n){p=o;}else{var q=o.getElementsByTagName('*');for(var r=0;r<q.length;r++)if(q[r].id==n){p=q[r];break;}}}else p=document.getElementById(n);return p;}function k(n,o,p){for(var q=0;q<n.length;q++)o.apply(p,[].concat(n[q]));}function l(n,o,p){var q=p[0];if(!(q in n))p[o]=(p[o]||0)+1;n[q]=true;}function m(){return {};}e.exports=i;});
__d("PluginPrelude",["ServerJS"],function(a,b,c,d,e,f){b('ServerJS');});
__d("array-extensions",["copyProperties"],function(a,b,c,d,e,f){var g=b('copyProperties');function h(i){return function(){if(this===a)throw new TypeError();return i.apply(this,arguments);};}g(Array.prototype,{map:function(i,j){if(this===a||typeof i!='function')throw new TypeError();var k,l=this.length,m=new Array(l);for(k=0;k<l;++k)if(k in this)m[k]=i.call(j,this[k],k,this);return m;},forEach:function(i,j){this.map(i,j);},filter:h(function(i,j){if(typeof i!='function')throw new TypeError();var k,l,m=this.length,n=[];for(k=0;k<m;++k)if(k in this){l=this[k];if(i.call(j,l,k,this))n.push(l);}return n;}),every:h(function(i,j){if(typeof i!=='function')throw new TypeError();var k=new Object(this),l=k.length;for(var m=0;m<l;m++)if(m in k)if(!i.call(j,k[m],m,k))return false;return true;}),some:h(function(i,j){if(typeof i!=='function')throw new TypeError();var k=new Object(this),l=k.length;for(var m=0;m<l;m++)if(m in k)if(i.call(j,k[m],m,k))return true;return false;}),reduce:null,reduceRight:null,sort:h(Array.prototype.sort),reverse:h(Array.prototype.reverse),concat:h(Array.prototype.concat),slice:h(Array.prototype.slice),indexOf:h(Array.prototype.indexOf||function(i,j){var k=this.length;j|=0;if(j<0)j+=k;for(;j<k;j++)if(j in this&&this[j]===i)return j;return -1;}),contains:function(i){return this.indexOf(i)!=-1;},remove:function(i){var j=this.indexOf(i);if(j!=-1)this.splice(j,1);}});Array.prototype.each=Array.prototype.forEach;},3);
__d("Arbiter",["array-extensions","ArrayUtils","ErrorUtils","Util","copyProperties","hasArrayNature"],function(a,b,c,d,e,f){b("array-extensions");var g=b("ArrayUtils"),h=b("ErrorUtils"),i=b("Util"),j=b("copyProperties"),k=b("hasArrayNature");if(!window.async_callback)window.async_callback=function(m,n){return m;};function l(){j(this,{_listeners:[],_events:{},_callbacks:{},_last_id:1,_listen:{},_index:{}});j(this,l);}j(l,{SUBSCRIBE_NEW:'new',SUBSCRIBE_ALL:'all',BEHAVIOR_EVENT:'event',BEHAVIOR_PERSISTENT:'persistent',BEHAVIOR_STATE:'state',LIVEMESSAGE:'livemessage',BOOTLOAD:'bootload',FUNCTION_EXTENSION:'function_ext',subscribe:function(m,n,o){m=g.createFrom(m);var p=m.some(function(y){return !y||typeof(y)!='string';});if(p)return null;o=o||l.SUBSCRIBE_ALL;var q=l._getInstance(this);q._listeners.push({callback:n,types:m});var r=q._listeners.length-1;for(var s=0;s<m.length;s++){var t=m[s];if(!q._index[t])q._index[t]=[];q._index[t].push(r);if(o==l.SUBSCRIBE_ALL)if(t in q._events)for(var u=0;u<q._events[t].length;u++){var v=q._events[t][u],w=h.applyWithGuard(n,null,[t,v]);if(w===false){q._events[t].splice(u,1);u--;}}}var x={subscriberID:r};return x;},unsubscribe:function(m){var n=l._getInstance(this),o=n._listeners[m.subscriberID];if(!o)return;for(var p=0;p<o.types.length;p++){var q=o.types[p];if(n._index[q])for(var r=0;r<n._index[q].length;r++)if(n._index[q][r]==m.subscriberID){n._index[q].splice(r,1);if(n._index[q].length==0)delete n._index[q];break;}}delete n._listeners[m.subscriberID];},inform:function(m,n,o){var p=k(m);m=g.createFrom(m);var q=l._getInstance(this),r={};o=o||l.BEHAVIOR_EVENT;for(var s=0;s<m.length;s++){var t=m[s],u=null;if(o==l.BEHAVIOR_PERSISTENT){u=q._events.length;if(!(t in q._events))q._events[t]=[];q._events[t].push(n);q._events[t]._stateful=false;}else if(o==l.BEHAVIOR_STATE){u=0;q._events[t]=[n];q._events[t]._stateful=true;}else if(t in q._events)q._events[t]._stateful=false;window.ArbiterMonitor&&ArbiterMonitor.record('event',t,n,q);var v;if(q._index[t]){var w=g.createFrom(q._index[t]);for(var x=0;x<w.length;x++){var y=q._listeners[w[x]];if(y){v=h.applyWithGuard(y.callback,null,[t,n]);if(v===false){if(u!==null)q._events[t].splice(u,1);break;}}}}q._updateCallbacks(t,n);window.ArbiterMonitor&&ArbiterMonitor.record('done',t,n,q);r[t]=v;}return p?r:r[m[0]];},query:function(m){var n=l._getInstance(this);if(!(m in n._events))return null;if(n._events[m].length)return n._events[m][0];return null;},_instance:null,_getInstance:function(m){if(m instanceof l)return m;if(!l._instance)l._instance=new l();return l._instance;},registerCallback:function(m,n){var o,p=0,q=l._getInstance(this),r=false;if(typeof m=='function'){o=q._last_id;q._last_id++;r=true;}else{if(!q._callbacks[m])return null;o=m;}if(k(n)){var s={};for(var t=0;t<n.length;t++)s[n[t]]=1;n=s;}for(var u in n){try{if(q.query(u))continue;}catch(v){}p+=n[u];if(q._listen[u]===undefined)q._listen[u]={};q._listen[u][o]=(q._listen[u][o]||0)+n[u];}if(p==0&&r){h.applyWithGuard(m);return null;}if(!r){q._callbacks[o].depnum+=p;}else q._callbacks[o]={callback:async_callback(m,'arbiter'),depnum:p};return o;},_updateCallbacks:function(m,n){if(n===null||!this._listen[m])return;for(var o in this._listen[m]){this._listen[m][o]--;if(this._listen[m][o]<=0)delete this._listen[m][o];this._callbacks[o].depnum--;if(this._callbacks[o].depnum<=0){var p=this._callbacks[o].callback;delete this._callbacks[o];h.applyWithGuard(p);}}}});e.exports=l;});
__d("ge",[],function(a,b,c,d,e,f){function g(h){return typeof h=='string'?document.getElementById(h):h;}e.exports=g;});
__d("$",["ge"],function(a,b,c,d,e,f){var g=b("ge");function h(i){var j=g(i);return j;}e.exports=h;});
__d("css-core",["$"],function(a,b,c,d,e,f){var g=b('$'),h={hasClass:function(i,j){i=g(i);return (' '+i.className+' ').indexOf(' '+j+' ')>-1;},addClass:function(i,j){i=g(i);if(j&&!h.hasClass(i,j))i.className=i.className+' '+j;return i;},removeClass:function(i,j){i=g(i);if(h.hasClass(i,j))i.className=i.className.replace(new RegExp('(^|\\s)'+j+'(?:\\s|$)','g'),'$1').replace(/\s+/g,' ').replace(/^\s*|\s*$/g,'');return i;},toggleClass:function(i,j){return h.conditionClass(i,j,!h.hasClass(i,j));},conditionClass:function(i,j,k){return (k?h.addClass:h.removeClass)(i,j);},show:function(i){h.removeClass(i,'hidden_elem');},hide:function(i){h.addClass(i,'hidden_elem');},conditionShow:function(i,j){h.conditionClass(i,'hidden_elem',!j);}};a.CSS=e.exports=h;},3);
__d("ObjectUtils",["copyProperties","hasArrayNature"],function(a,b,c,d,e,f){var g=b("copyProperties"),h=b("hasArrayNature"),i={isScalar:function(j){return (/string|number|boolean/).test(typeof j);},getKeys:function(j){var k=[];for(var l in j)k.push(l);return k;},getValues:function(j){var k=[];for(var l in j)k.push(j[l]);return k;},countKeys:function(j){var k=0;for(var l in j)k++;return k;},areEqual:function(j,k){return JSON.stringify(j)==JSON.stringify(k);},merge:function(){var j={};for(var k=0;k<arguments.length;k++)g(j,arguments[k]);return j;},coalesce:function(){for(var j=0;j<arguments.length;++j)if(arguments[j]!=null)return arguments[j];return null;},createFrom:function(j,k){var l={},m=h(k);if(typeof k=='undefined')k=true;for(var n=j.length;n--;)l[j[n]]=m?k[n]:k;return l;}};e.exports=i;});
__d("ua",[],function(a,b,c,d,e,f){var g={ie:function(){return g._populate()||this._ie;},ie64:function(){return g.ie()&&this._win64;},firefox:function(){return g._populate()||this._firefox;},opera:function(){return g._populate()||this._opera;},safari:function(){return g._populate()||this._safari;},chrome:function(){return g._populate()||this._chrome;},windows:function(){return g._populate()||this._windows;},osx:function(){return g._populate()||this._osx;},linux:function(){return g._populate()||this._linux;},iphone:function(){return g._populate()||this._iphone;},_populated:false,_populate:function(){if(g._populated)return;g._populated=true;var h=navigator.userAgent,i=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))/.exec(h),j=/(Mac OS X)|(Windows)|(Linux)/.exec(h),k=/\b(iPhone|iP[ao]d)/.exec(h);g._win64=!!(/Win64/.exec(h));if(i){g._ie=i[1]?parseFloat(i[1]):NaN;if(g._ie&&document.documentMode)g._ie=document.documentMode;g._firefox=i[2]?parseFloat(i[2]):NaN;g._opera=i[3]?parseFloat(i[3]):NaN;g._safari=i[4]?parseFloat(i[4]):NaN;if(g._safari){i=/(?:Chrome\/(\d+\.\d+))/.exec(h);g._chrome=i&&i[1]?parseFloat(i[1]):NaN;}else g._chrome=NaN;}else g._ie=g._firefox=g._opera=g._chrome=g._safari=NaN;if(j){if(j[1]){var l=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(h);g._osx=l?parseFloat(l[1].replace('_','.')):true;}else g._osx=false;g._windows=!!j[2];g._linux=!!j[3];}else g._osx=g._windows=g._linux=false;g._iphone=k;}};a.ua=e.exports=g;},3);
__d("DOMQuery",["ArrayUtils","css-core","ObjectUtils","ge","ua"],function(a,b,c,d,e,f){var g=b("ArrayUtils"),h=b("css-core"),i=b("ObjectUtils"),j=b("ge"),k=b("ua"),l={find:function(m,n){var o=l.scry(m,n);return o[0];},scry:function(m,n){if(!m||!m.getElementsByTagName)return [];var o=n.split(' '),p=[m],q=!!m.documentElement;for(var r=0;r<o.length;r++){if(p.length===0)break;if(o[r]==='')continue;var s=o[r],t=[],u=false;if(s.charAt(0)=='^')if(r===0){u=true;s=s.slice(1);}else return [];s=s.replace(/\./g,' .');s=s.replace(/\#/g,' #');s=s.replace(/\[/g,' [');var v=s.split(' '),w=v[0]||'*',x=v[1]&&v[1].charAt(0)=='#';if(x){var y=j(v[1].slice(1),true);if(y&&('*'==w||y.tagName.toLowerCase()==w))for(var z=0;z<p.length;z++)if(u&&l.contains(y,p[z])){t=[y];break;}else if(document==p[z]||l.contains(p[z],y)){t=[y];break;}}else{var aa=[],ba=p.length,ca;for(var da=0;da<ba;da++){if(u){ca=[];var ea=p[da].parentNode,fa=w=='*';while(l.isElementNode(ea)){if(fa||ea.tagName.toLowerCase()==w)ca.push(ea);ea=ea.parentNode;}}else ca=p[da].getElementsByTagName(w);var ga=ca.length;for(var ha=0;ha<ga;ha++)aa.push(ca[ha]);}for(var ia=1;ia<v.length;ia++){var ja=v[ia],ka=ja.charAt(0)=='.',la=ja.substring(1);for(da=0;da<aa.length;da++){var ma=aa[da];if(!ma)continue;if(ka){if(!h.hasClass(ma,la))delete aa[da];continue;}else{var na=ja.slice(1,ja.length-1);if(na.indexOf('=')==-1){if(ma.getAttribute(na)===null){delete aa[da];continue;}}else{var oa=na.split('='),pa=oa[0],qa=oa[1];qa=qa.slice(1,qa.length-1);if(ma.getAttribute(pa)!=qa){delete aa[da];continue;}}}}}for(da=0;da<aa.length;da++)if(aa[da]){t.push(aa[da]);if(u)break;}}p=t;}return p;},getText:(function(){var m=document.createElement('div'),n=m.textContent!=null?'textContent':'innerText';return function(o){if(!o){return '';}else if(l.isTextNode(o)){return o.data;}else return o[n];};})(),getSelection:function(){var m=window.getSelection,n=document.selection;if(m){return m()+'';}else if(n)return n.createRange().text;return null;},contains:function(m,n){m=j(m);n=j(n);if(!m||!n){return false;}else if(m===n){return true;}else if(l.isTextNode(m)){return false;}else if(l.isTextNode(n)){return l.contains(m,n.parentNode);}else if(m.contains){return m.contains(n);}else if(m.compareDocumentPosition){return !!(m.compareDocumentPosition(n)&16);}else return false;},getRootElement:function(){var m=null;if(window.Quickling&&Quickling.isActive())m=j('content');return m||document.body;},isNode:function(m){return !!(m&&(typeof Node=='object'?m instanceof Node:typeof m=="object"&&typeof m.nodeType=='number'&&typeof m.nodeName=='string'));},isNodeOfType:function(m,n){var o=g.createFrom(n).join('|').toUpperCase().split('|'),p=i.createFrom(o);return l.isNode(m)&&m.nodeName in p;},isElementNode:function(m){return l.isNode(m)&&m.nodeType==1;},isTextNode:function(m){return l.isNode(m)&&m.nodeType==3;},getDocumentScrollElement:function(m){m=m||document;if(h.hasClass(m.documentElement,'wrapped')){var n=m.getElementById('body');if(n)return n;}return !(k.chrome()||k.safari())&&m.compatMode==='CSS1Compat'?m.documentElement:m.body;},getDocumentBodyElement:function(m){m=m||document;if(h.hasClass(m.documentElement,'wrapped')){var n=m.getElementById('body');if(n)return n;}return m.body;}};e.exports=l;});
__d("css",["DOMQuery","css-core","copyProperties"],function(a,b,c,d,e,f){var g=b('DOMQuery'),h=b('css-core'),i=b('copyProperties');i(h,{shown:function(j){return !h.hasClass(j,'hidden_elem');},toggle:function(j){h.conditionShow(j,!h.shown(j));},setClass:function(j,k){$(j).className=k||'';return j;},setStyle:function(j,k,l){switch(k){case 'opacity':j.style.opacity=l;j.style.filter=l!==''?'alpha(opacity='+l*100+')':'';break;case 'float':j.style.cssFloat=j.style.styleFloat=l;break;default:k=k.replace(/-(.)/g,function(m,n){return n.toUpperCase();});j.style[k]=l;}return j;},getStyle:function(j,k){j=$(j);k=k.replace(/-(.)/g,function(n,o){return o.toUpperCase();});function l(n){return n.replace(/([A-Z])/g,'-$1').toLowerCase();}if(window.getComputedStyle){var m=window.getComputedStyle(j,null);if(m)return m.getPropertyValue(l(k));}if(document.defaultView&&document.defaultView.getComputedStyle){var m=document.defaultView.getComputedStyle(j,null);if(m)return m.getPropertyValue(l(k));if(k=="display")return "none";}if(j.currentStyle)return j.currentStyle[k];return j.style&&j.style[k];},getStyleFloat:function(j,k){return parseFloat(h.getStyle(j,k),10);},getOpacity:function(j){j=$(j);var k=h.getStyle(j,'filter'),l=null;if(k&&(l=/(\d+(?:\.\d+)?)/.exec(k))){return parseFloat(l.pop())/100;}else if(k=h.getStyle(j,'opacity')){return parseFloat(k);}else return 1;},isFixed:function(j){while(j&&j!==document.documentElement){if(h.getStyle(j,'position')==='fixed')return true;j=j.parentNode;}return false;},getScrollParent:(function(){function j(k,l){var m=h.getStyle(k,l);return (m==='auto'||m==='scroll');}return function(k){if(!k)return null;while(k!==document.body){if(j(k,'overflow')||j(k,'overflowY')||j(k,'overflowX'))return k;k=k.parentNode;}return window;};})()});e.exports=h;},3);
__d("DOMDimensions",["DOMQuery"],function(a,b,c,d,e,f){var g=b("DOMQuery"),h={getElementDimensions:function(i){return {width:i.offsetWidth||0,height:i.offsetHeight||0};},getViewportDimensions:function(){var i=(window&&window.innerWidth)||(document&&document.documentElement&&document.documentElement.clientWidth)||(document&&document.body&&document.body.clientWidth)||0,j=(window&&window.innerHeight)||(document&&document.documentElement&&document.documentElement.clientHeight)||(document&&document.body&&document.body.clientHeight)||0;return {width:i,height:j};},getDocumentDimensions:function(i){i=i||document;var j=g.getDocumentScrollElement(i),k=j.scrollWidth||0,l=j.scrollHeight||0;return {width:k,height:l};}};e.exports=h;});
__d("DOMPosition",["DOMQuery"],function(a,b,c,d,e,f){var g=b("DOMQuery"),h={getScrollPosition:function(){var i=g.getDocumentScrollElement();return {x:i.scrollLeft,y:i.scrollTop};},getElementPosition:function(i){if(!i)return;if(!('getBoundingClientRect' in i))return {x:0,y:0};var j=i.getBoundingClientRect(),k=document.documentElement,l=Math.round(j.left)-k.clientLeft,m=Math.round(j.top)-k.clientTop;return {x:l,y:m};}};e.exports=h;});
__d("json",[],function(a,b,c,d,e,f){if(!this.JSON)this.JSON={};(function(){function g(p){return p<10?'0'+p:p;}if(typeof Date.prototype.toJSON!=='function'){Date.prototype.toJSON=function(p){return isFinite(this.valueOf())?this.getUTCFullYear()+'-'+g(this.getUTCMonth()+1)+'-'+g(this.getUTCDate())+'T'+g(this.getUTCHours())+':'+g(this.getUTCMinutes())+':'+g(this.getUTCSeconds())+'Z':null;};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(p){return this.valueOf();};}var h=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,i=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,j,k,l={'\b':'\\b','\t':'\\t','\n':'\\n','\f':'\\f','\r':'\\r','"':'\\"','\\':'\\\\'},m;function n(p){i.lastIndex=0;return i.test(p)?'"'+p.replace(i,function(q){var r=l[q];return typeof r==='string'?r:'\\u'+('0000'+q.charCodeAt(0).toString(16)).slice(-4);})+'"':'"'+p+'"';}function o(p,q){var r,s,t,u,v=j,w,x=q[p];if(x&&typeof x==='object'&&typeof x.toJSON==='function')x=x.toJSON(p);if(typeof m==='function')x=m.call(q,p,x);switch(typeof x){case 'string':return n(x);case 'number':return isFinite(x)?String(x):'null';case 'boolean':case 'null':return String(x);case 'object':if(!x)return 'null';j+=k;w=[];if(Object.prototype.toString.apply(x)==='[object Array]'){u=x.length;for(r=0;r<u;r+=1)w[r]=o(r,x)||'null';t=w.length===0?'[]':j?'[\n'+j+w.join(',\n'+j)+'\n'+v+']':'['+w.join(',')+']';j=v;return t;}if(m&&typeof m==='object'){u=m.length;for(r=0;r<u;r+=1){s=m[r];if(typeof s==='string'){t=o(s,x);if(t)w.push(n(s)+(j?': ':':')+t);}}}else for(s in x)if(Object.hasOwnProperty.call(x,s)){t=o(s,x);if(t)w.push(n(s)+(j?': ':':')+t);}t=w.length===0?'{}':j?'{\n'+j+w.join(',\n'+j)+'\n'+v+'}':'{'+w.join(',')+'}';j=v;return t;}}if(typeof JSON.stringify!=='function')JSON.stringify=function(p,q,r){var s;j='';k='';if(typeof r==='number'){for(s=0;s<r;s+=1)k+=' ';}else if(typeof r==='string')k=r;m=q;if(q&&typeof q!=='function'&&(typeof q!=='object'||typeof q.length!=='number'))throw new Error('JSON.stringify');return o('',{'':p});};if(typeof JSON.parse!=='function')JSON.parse=function(p,q){var r;function s(t,u){var v,w,x=t[u];if(x&&typeof x==='object')for(v in x)if(Object.hasOwnProperty.call(x,v)){w=s(x,v);if(w!==undefined){x[v]=w;}else delete x[v];}return q.call(t,u,x);}p=String(p);h.lastIndex=0;if(h.test(p))p=p.replace(h,function(t){return '\\u'+('0000'+t.charCodeAt(0).toString(16)).slice(-4);});if(/^[\],:{}\s]*$/.test(p.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,'@').replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,']').replace(/(?:^|:|,)(?:\s*\[)+/g,''))){r=(eval)('('+p+')');return typeof q==='function'?s({'':r},''):r;}throw new SyntaxError('JSON.parse');};JSON.stringify=function(p){return function(){var q=p.apply(this,arguments);return q?q.replace(/[%\u2028\u2029]/g,function(r){var s=r.charCodeAt(0).toString(16);return '\\u0000'.substring(0,6-s.length)+s;}):q;};}(JSON.stringify);}());if(!a.JSON)a.JSON=JSON;},3);
__d("DOMEventListener",[],function(a,b,c,d,e,f){var g,h;if(window.addEventListener){g=function(j,k,l){j.addEventListener(k,l,false);};h=function(j,k,l){j.removeEventListener(k,l,false);};}else if(window.attachEvent){g=function(j,k,l){j.attachEvent('on'+k,l);};h=function(j,k,l){j.detachEvent('on'+k,l);};}var i={add:function(j,k,l){g(j,k,l);return {remove:function(){h(j,k,l);j=null;}};},remove:h};e.exports=i;});
__d("PopupWindow",["copyProperties","ua","DOMQuery","DOMDimensions"],function(a,b,c,d,e,f){var g=b("copyProperties"),h=b("ua"),i=b("DOMQuery"),j=b("DOMDimensions"),k={_opts:{allowShrink:true,strategy:'vector',timeout:100,widthElement:null},init:function(l){g(k._opts,l);setInterval(k._resizeCheck,k._opts.timeout);},_resizeCheck:function(){var l=j.getViewportDimensions(),m=k._getDocumentSize(),n=m.height-l.height,o=m.width-l.width;if(o<0&&!k._opts.widthElement)o=0;if(!k._opts.allowShrink&&n<0)n=0;if(n||o)try{if(window.console&&window.console.firebug)console.log('Resizing will not work in firefox with firebug enabled. '+'See https://bugzilla.mozilla.org/show_bug.cgi?id=691693');window.resizeBy(o,n);if(o)window.moveBy(o/-2,0);}catch(p){}},_getDocumentSize:function(){var l=j.getDocumentDimensions();if(k._opts.strategy==='offsetHeight')l.height=document.body.offsetHeight;if(k._opts.widthElement){var m=i.scry(document.body,k._opts.widthElement)[0];if(m)l.width=j.getElementDimensions(m).width;}if(window.Dialog&&Dialog.max_bottom&&Dialog.max_bottom>l.height)l.height=Dialog.max_bottom;return l;},open:function(l,m,n){var o=typeof window.screenX!='undefined'?window.screenX:window.screenLeft,p=typeof window.screenY!='undefined'?window.screenY:window.screenTop,q=typeof window.outerWidth!='undefined'?window.outerWidth:document.body.clientWidth,r=typeof window.outerHeight!='undefined'?window.outerHeight:(document.body.clientHeight-22),s=parseInt(o+((q-n)/2),10),t=parseInt(p+((r-m)/2.5),10),u=('width='+n+',height='+m+',left='+s+',top='+t);return window.open(l,'_blank',u);}};e.exports=k;});
__d("goURI",[],function(a,b,c,d,e,f){function g(h,i){h=h.toString();if(!i&&a.PageTransitions&&PageTransitions.isInitialized()){PageTransitions.go(h);}else if(window.location.href==h){window.location.reload();}else window.location.href=h;}e.exports=g;});
__d("URI",["copyProperties","goURI"],function(a,b,c,d,e,f){var g=b("copyProperties"),h=b("goURI");function i(j){if(!(this instanceof i))return new i(j||window.location.href);this.parse(j||'');}g(i,{getRequestURI:function(j,k){j=j===undefined||j;if(j&&window.PageTransitions&&PageTransitions.isInitialized()){return PageTransitions.getCurrentURI(!!k).getQualifiedURI();}else return new i(window.location.href);},getMostRecentURI:function(){if(window.PageTransitions&&PageTransitions.isInitialized()){return PageTransitions.getMostRecentURI().getQualifiedURI();}else return new i(window.location.href);},getNextURI:function(){if(window.PageTransitions&&PageTransitions.isInitialized()){return PageTransitions.getNextURI().getQualifiedURI();}else return new i(window.location.href);},expression:/(((\w+):\/\/)([^\/:]*)(:(\d+))?)?([^#?]*)(\?([^#]*))?(#(.*))?/,arrayQueryExpression:/^(\w+)((?:\[\w*\])+)=?(.*)/,explodeQuery:function(j){if(!j)return {};var k={};j=j.replace(/%5B/ig,'[').replace(/%5D/ig,']');j=j.split('&');for(var l=0,m=j.length;l<m;l++){var n=j[l].match(i.arrayQueryExpression);if(!n){var o=j[l].split('=');k[i.decodeComponent(o[0])]=o[1]===undefined?null:i.decodeComponent(o[1]);}else{var p=n[2].split(/\]\[|\[|\]/).slice(0,-1),q=n[1],r=i.decodeComponent(n[3]||'');p[0]=q;var s=k;for(var t=0;t<p.length-1;t++)if(p[t]){if(s[p[t]]===undefined)if(p[t+1]&&!p[t+1].match(/^\d+$/)){s[p[t]]={};}else s[p[t]]=[];s=s[p[t]];}else{if(p[t+1]&&!p[t+1].match(/^\d+$/)){s.push({});}else s.push([]);s=s[s.length-1];}if(s instanceof Array&&p[p.length-1]===''){s.push(r);}else s[p[p.length-1]]=r;}}return k;},implodeQuery:function(j,k,l){k=k||'';if(l===undefined)l=true;var m=[];if(j===null||j===undefined){m.push(l?i.encodeComponent(k):k);}else if(j instanceof Array){for(var n=0;n<j.length;++n)try{if(j[n]!==undefined)m.push(i.implodeQuery(j[n],k?(k+'['+n+']'):n));}catch(o){}}else if(typeof(j)=='object'){if(('nodeName' in j)&&('nodeType' in j)){m.push('{node}');}else for(var p in j)try{if(j[p]!==undefined)m.push(i.implodeQuery(j[p],k?(k+'['+p+']'):p));}catch(o){}}else if(l){m.push(i.encodeComponent(k)+'='+i.encodeComponent(j));}else m.push(k+'='+j);return m.join('&');},encodeComponent:function(j){return encodeURIComponent(j).replace(/%5D/g,"]").replace(/%5B/g,"[");},decodeComponent:function(j){return decodeURIComponent(j.replace(/\+/g,' '));},INVALID_DOMAIN:'invalid.invalid',sanitizeDomain:function(j){var k=new RegExp('[\\x00-\\x2c\\x2f\\x3b-\\x40\\x5c\\x5e\\x60\\x7b-\\x7f'+'\\uFDD0-\\uFDEF\\uFFF0-\\uFFFF'+'\\u2047\\u2048\\uFE56\\uFE5F\\uFF03\\uFF0F\\uFF1F]');if(k.test(j)){return i.INVALID_DOMAIN;}else return j;}});g(i.prototype,{parse:function(j){var k=j.toString().match(i.expression);g(this,{protocol:k[3]||'',domain:i.sanitizeDomain(k[4]||''),port:k[6]||'',path:k[7]||'',query_s:k[9]||'',fragment:k[11]||''});return this;},setProtocol:function(j){this.protocol=j;return this;},getProtocol:function(){return this.protocol;},setQueryData:function(j){this.query_s=i.implodeQuery(j);return this;},addQueryData:function(j){return this.setQueryData(g(this.getQueryData(),j));},removeQueryData:function(j){if(!(j instanceof Array))j=[j];var k=this.getQueryData();for(var l=0,m=j.length;l<m;++l)delete k[j[l]];return this.setQueryData(k);},getQueryData:function(){return i.explodeQuery(this.query_s);},setFragment:function(j){this.fragment=j;return this;},getFragment:function(){return this.fragment;},setDomain:function(j){this.domain=i.sanitizeDomain(j);return this;},getDomain:function(){return this.domain;},setPort:function(j){this.port=j;return this;},getPort:function(){return this.port;},setPath:function(j){this.path=j;return this;},getPath:function(){return this.path.replace(/^\/+/,'/');},isEmpty:function(){return !(this.path||this.protocol||this.domain||this.port||this.query_s||this.fragment);},toString:function(){var j='';this.protocol&&(j+=this.protocol+'://');this.domain&&(j+=this.domain);this.port&&(j+=':'+this.port);if(this.domain&&!this.path)j+='/';this.path&&(j+=this.path);this.query_s&&(j+='?'+this.query_s);this.fragment&&(j+='#'+this.fragment);return j;},valueOf:function(){return this.toString();},isFacebookURI:function(){if(!i._facebookURIRegex)i._facebookURIRegex=new RegExp('(^|\\.)facebook\\.com([^.]*)$','i');return (!this.domain||i._facebookURIRegex.test(this.domain));},isQuicklingEnabled:function(){return window.Quickling&&Quickling.isActive()&&Quickling.isPageActive(this);},getRegisteredDomain:function(){if(!this.domain)return '';if(!this.isFacebookURI())return null;var j=this.domain.split('.'),k=j.indexOf('facebook');return j.slice(k).join('.');},getUnqualifiedURI:function(){return new i(this).setProtocol(null).setDomain(null).setPort(null);},getQualifiedURI:function(){var j=new i(this);if(!j.getDomain()){var k=i();j.setProtocol(k.getProtocol()).setDomain(k.getDomain()).setPort(k.getPort());}return j;},isSameOrigin:function(j){var k=j||window.location.href;if(!(k instanceof i))k=new i(k.toString());if(this.getProtocol()&&this.getProtocol()!=k.getProtocol())return false;if(this.getDomain()&&this.getDomain()!=k.getDomain())return false;return true;},go:function(j){h(this,j);},setSubdomain:function(j){var k=new i(this).getQualifiedURI(),l=k.getDomain().split('.');if(l.length<=2){l.unshift(j);}else l[0]=j;return k.setDomain(l.join('.'));},getSubdomain:function(){if(!this.getDomain())return '';var j=this.getDomain().split('.');if(j.length<=2){return '';}else return j[0];},setSecure:function(j){return this.setProtocol(j?'https':'http');},isSecure:function(){return this.getProtocol()=='https';}});e.exports=i;});
__d("bind",["function-extensions","Util"],function(a,b,c,d,e,f){b('function-extensions');var g=b('Util');function h(i,j){var k=Array.prototype.slice.call(arguments,2);if(typeof j!='string')return Function.prototype.bind.apply(j,[i].concat(k));function l(){var m=k.concat(Array.prototype.slice.call(arguments));if(i[j])return i[j].apply(i,m);}l.toString=function(){return 'bound lazily: '+i[j];};return l;}e.exports=h;a.bind=h;},3);
__d("PluginOptin",["json","DOMEventListener","PopupWindow","URI","bind","copyProperties"],function(a,b,c,d,e,f){b('json');var g=b('DOMEventListener'),h=b('PopupWindow'),i=b('URI'),j=b('bind'),k=b('copyProperties');function l(m){k(this,{return_params:i.getRequestURI().getQueryData(),login_params:{},optin_params:{},plugin:m});this.addReturnParams({ret:'optin'});delete this.return_params.hash;}k(l.prototype,{addReturnParams:function(m){k(this.return_params,m);return this;},addLoginParams:function(m){k(this.login_params,m);return this;},addOptinParams:function(m){k(this.optin_params,m);return this;},start:function(){var m=new i('/dialog/optin').addQueryData(this.optin_params).addQueryData({display:'popup',app_id:127760087237610,secure:i.getRequestURI().isSecure(),social_plugin:this.plugin,return_params:JSON.stringify(this.return_params),login_params:JSON.stringify(this.login_params)});this.popup=h.open(m.toString(),420,450);return this;}});l.starter=function(m,n,o,p){var q=new l(m);q.addReturnParams(n||{});q.addLoginParams(o||{});q.addOptinParams(p||{});return j(q,q.start);};l.listen=function(m,n,o,p,q){g.add(m,'click',l.starter(n,o,p,q));};e.exports=l;});
__d("resolveWindow",[],function(a,b,c,d,e,f){function g(h){var i=window,j=h.split('.');try{for(var l=0;l<j.length;l++){var m=j[l],n=/^frames\[['"]?([a-zA-Z0-9\-_]+)['"]?\]$/.exec(m);if(n){i=i.frames[n[1]];}else if(m==='opener'||m==='parent'||m==='top'){i=i[m];}else return null;}}catch(k){return null;}return i;}e.exports=g;});
__d("XD",["function-extensions","copyProperties","ua","URI","Arbiter","resolveWindow"],function(a,b,c,d,e,f){b("function-extensions");var g=b("copyProperties"),h=b("ua"),i=b("URI"),j=b("Arbiter"),k=b("resolveWindow"),l='fb_xdm_frame_'+location.protocol.replace(':',''),m={_callbacks:[],_opts:{autoResize:false,allowShrink:true,channelUrl:null,hideOverflow:false,newResizeMethod:false,resizeTimeout:100,resizeWidth:false,expectResizeAck:false,resizeAckTimeout:6000},_lastResizeAckId:0,_resizeCount:0,_resizeTimestamp:0,init:function(o){this._opts=g(g({},this._opts),o);if(this._opts.autoResize)this._startResizeMonitor();j.subscribe('Connect.Unsafe.resize.ack',function(p,q){if(!q.id)q.id=this._resizeCount;if(q.id>this._lastResizeAckId)this._lastResizeAckId=q.id;}.bind(this));},send:function(o,p){p=p||this._opts.channelUrl;if(!p)return;if(!(/xd_arbiter\.php/.test(p))){if(p.substr(0,4)!='http')return;var q=p+'&'+i.implodeQuery(o),r='f'+(Math.random()*(1<<30)).toString(16).replace('.',''),s=document.body.appendChild(document.createElement('div')),t=false;s.style.position='absolute';s.style.top='-10000px';s.style.width='1px';s.style.height='1px';m._callbacks[r]=function(){if(t){(function(){s.parentNode.removeChild(s);}).defer(3000);delete m._callbacks[r];}};if(h.ie()){var u,v=document.createElement('div');u='<iframe onload="XD._callbacks.'+r+'()"></iframe>';v.innerHTML=u;v.firstChild.setAttribute('src',q);u=v.innerHTML;s.innerHTML='<iframe src="javascript:false"></iframe>';t=true;(function(){s.innerHTML=u;}).defer();}else{var w=document.createElement('iframe');w.onload=m._callbacks[r];s.appendChild(w);t=true;w.src=q;}return;}var x={},y=new i(p);g(x,o);g(x,i.explodeQuery(y.getFragment()));var z=new i(x.origin),aa=[z.getDomain()],ba=k(x.relation.replace(/^parent\./,''));ba.frames[l].proxyMessage(i.implodeQuery(x),aa);},_computeSize:function(){return {width:this._opts.resizeWidth?this._calcWidth(m.forced_min_width):0,height:this._calcHeight(this._opts.newResizeMethod)};},_calcHeight:function(o){var p=document.body,q=document.documentElement,r=0;if(o){r=Math.max(Math.max(p.offsetHeight,p.scrollHeight)+p.offsetTop,Math.max(q.offsetHeight,q.scrollHeight)+q.offsetTop);}else{if(h.ie()){r=Math.max(p.offsetHeight,p.scrollHeight)+p.offsetTop;}else r=q.offsetHeight+q.offsetTop;if(window.Dialog)r=Math.max(r,Dialog.max_bottom);}return r;},_calcWidth:function(o){var p=document.body,q=document.documentElement,r=0;if(p.offsetWidth<p.scrollWidth){r=p.scrollWidth+p.offsetLeft;}else{var s=p.childNodes;for(var t=0;t<s.length;t++){var u=s[t],v=u.offsetWidth+u.offsetLeft;if(v>r)r=v;}}if(o)r=Math.max(r,o);if(q.clientLeft>0)r+=(q.clientLeft*2);if(q.clientTop>0)height+=(q.clientTop*2);return r;},_startResizeMonitor:function(){var o,p=document.documentElement;if(this._opts.hideOverflow){p.style.overflow='hidden';document.body.style.overflow='hidden';}setInterval((function(){var q=this._computeSize(),r=Date.now(),s=this._lastResizeAckId<this._resizeCount&&(r-this._resizeTimestamp)>this._opts.resizeAckTimeout;if(!o||(this._opts.expectResizeAck&&s)||(this._opts.allowShrink&&o.width!=q.width)||(!this._opts.allowShrink&&o.width<q.width)||(this._opts.allowShrink&&o.height!=q.height)||(!this._opts.allowShrink&&o.height<q.height)){o=q;this._resizeCount++;this._resizeTimestamp=r;var t={type:'resize',height:q.height,ackData:{id:this._resizeCount}};if(q.width&&q.width!=0)t.width=q.width;try{if(i(document.referrer).isFacebookURI()&&window.parent!=window&&window.name&&window.parent.location&&window.parent.location.toString&&i(window.parent.location).isFacebookURI()){var v=window.parent.document.getElementsByTagName('iframe');for(var w=0;w<v.length;w=w+1)if(v[w].name==window.name){if(this._opts.resizeWidth)v[w].style.width=t.width+'px';v[w].style.height=t.height+'px';}}this.send(t);}catch(u){this.send(t);}}}).bind(this),this._opts.resizeTimeout);}},n=g({},m);e.exports.UnverifiedXD=n;e.exports.XD=m;a.UnverifiedXD=n;a.XD=m;});
__d("PluginSend",["Arbiter","css","DOMDimensions","DOMPosition","DOMQuery","PluginOptin","XD","copyProperties"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('css'),i=b('DOMDimensions'),j=b('DOMPosition'),k=b('DOMQuery'),l=b('PluginOptin'),m=b('XD').UnverifiedXD,n=b('copyProperties'),o='platform/socialplugins/dialog',p='platform/socialplugins/send/sent',q='platform/socialplugins/send/cancel',r=false,s=false,t={type:'presentEdgeCommentDialog',controllerID:'',widget_type:'send',nodeURL:'',width:400,height:300,query:{}},u={close:'dismissEdgeCommentDialog',show:'showEdgeCommentDialog',hide:'hideEdgeCommentDialog'},v={element:null,href:'',canpersonalize:false},w,x,y='';function z(){new l("send").addReturnParams({act:"send"}).start();}function aa(da){if(!v.canpersonalize)return z();if(typeof da!=='string')if(!r){da='open';}else if(s){da='hide';}else da='show';switch(da){case 'open':g.inform(o,{controllerID:y,event:da});r=s=true;var ea=i.getElementDimensions(x),fa=j.getElementPosition(x);t.anchorGeometry={x:ea.width,y:ea.height};t.anchorPosition={x:fa.x,y:fa.y};var ga=ba();t.query.anchorTargetX=ga.x;t.query.anchorTargetY=ga.y;m.send(t);break;case 'close':g.inform(o,{controllerID:y,event:da});r=s=false;break;case 'show':s=true;break;default:s=false;break;}h[s?'show':'hide'](w);h[s?'hide':'show'](x);if(da!=='open')m.send({type:u[da]});}function ba(){var da=k.find(x,'.pluginButtonIcon'),ea=j.getElementPosition(da),fa=i.getElementDimensions(da);return {y:ea.y+fa.width/2,x:ea.x+fa.height/2};}var ca={init:function(da){n(v,da);y=t.controllerID=v.element.id;t.nodeURL=v.href;w=k.find(v.element,'.pluginSendActive');x=k.find(v.element,'.pluginSendInactive');v.element.onclick=aa;g.subscribe(q,function(ea,fa){if(fa.controllerID===y)aa('hide');},g.SUBSCRIBE_NEW);g.subscribe(p,function(ea,fa){if(fa.controllerID===y)aa('close');},g.SUBSCRIBE_NEW);if(da.autosubmit)aa('open');}};a.Arbiter=g;e.exports=ca;});
__d("UnverifiedXD",["XD","XDUnverifiedChannel"],function(a,b,c,d,e,f){var g=b('XD').UnverifiedXD,h=c('XDUnverifiedChannel').channel;g.init({channelUrl:h});e.exports=g;});
__d("curry",["bind"],function(a,b,c,d,e,f){var g=b('bind'),h=g(null,g,null);e.exports=h;a.curry=h;},3);
__d("PluginResize",["UnverifiedXD","bind","copyProperties","curry"],function(a,b,c,d,e,f){var g=b('UnverifiedXD'),h=b('bind'),i=b('copyProperties'),j=b('curry');function k(n){n=n||document.body;return n.offsetWidth+n.offsetLeft;}function l(n){n=n||document.body;return n.offsetHeight+n.offsetTop;}function m(n,o){this.calcWidth=n||k;this.calcHeight=o||l;this.width=undefined;this.height=undefined;}i(m.prototype,{resize:function(){var n=this.calcWidth(),o=this.calcHeight();if(n!==this.width||o!==this.height){this.width=n;this.height=o;g.send({type:'resize',width:n,height:o});}return this;},auto:function(n){setInterval(h(this,this.resize),n||250);return this;}});m.auto=function(n,o){return new m(j(k,n),j(l,n)).resize().auto(o);};e.exports=m;});